<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Just Cook - Ready-to-Cook Food</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
    <style>
        :root {
            --primary: #ff6b00;
            --secondary: #000000;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: black;
        }

        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            font-weight: bold;
            font-size: 24px;
            color: var(--secondary);
        }

        .logo-icon {
            color: var(--primary);
            margin-right: 10px;
            font-size: 30px;
        }

        .logo span:last-child {
            color: var(--primary);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 30px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: var(--primary);
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("https://images.immediate.co.uk/production/volatile/sites/30/2025/01/COOK-945de71.jpeg") center/cover no-repeat;
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #e05d00;
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            margin-left: 15px;
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.2rem;
        }

        .section-title span {
            color: var(--primary);
        }

        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .product-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-10px);
        }

        .product-image {
            height: 200px;
            width: 100%;
            object-fit: cover;
        }

        .product-info {
            padding: 10px;
        }

        .product-title {
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .product-description {
            color: var(--gray);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .product-price {
            font-weight: bold;
            font-size: 1rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
        }

        /* Enhanced Meal Planning Styles */

        .plan-meal-btn {
            font-size: 1.1rem;
            padding: 16px 32px;
            background: linear-gradient(135deg, var(--primary), #ff8c00);
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(255, 107, 0, 0.25);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .plan-meal-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .plan-meal-btn:hover::before {
            left: 100%;
        }

        .plan-meal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(255, 107, 0, 0.35);
        }

        .plan-meal-btn:active {
            transform: translateY(0);
        }

        .meal-plan-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1500;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
            backdrop-filter: blur(8px);
            padding: 20px;
            box-sizing: border-box;
        }

        .meal-plan-overlay.open {
            display: flex;
        }

        .meal-plan-modal {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 520px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            animation: modalSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .meal-plan-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 28px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e9ecef;
        }

        .meal-plan-header h2 {
            color: var(--dark);
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
            line-height: 1.3;
        }

        .close-meal-modal {
            background: #f8f9fa;
            border: none;
            font-size: 24px;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-meal-modal:hover {
            background: #e9ecef;
            color: #495057;
            transform: scale(1.1);
        }

        .meal-form-group {
            margin-bottom: 28px;
        }

        .meal-form-group label {
            display: block;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--dark);
            line-height: 1.4;
        }

        .people-selector,
        .spice-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .people-btn,
        .spice-btn {
            padding: 12px 8px;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .people-btn::before,
        .spice-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 107, 0, 0.1), transparent);
            transition: left 0.4s ease;
        }

        .people-btn:hover::before,
        .spice-btn:hover::before {
            left: 100%;
        }

        .people-btn:hover,
        .spice-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 107, 0, 0.15);
        }

        .people-btn.selected,
        .spice-btn.selected {
            background: linear-gradient(135deg, var(--primary), #ff8c00);
            color: white;
            border-color: var(--primary);
            transform: scale(1.02);
            box-shadow: 0 4px 16px rgba(255, 107, 0, 0.3);
        }

        .dietary-checkboxes {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: white;
            min-width: 160px;
            justify-content: center;
        }

        .checkbox-label:hover {
            border-color: var(--primary);
            background: rgba(255, 107, 0, 0.05);
            transform: translateY(-1px);
        }

        .checkbox-label input[type="checkbox"] {
            margin-right: 8px;
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .find-meals-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary), #ff8c00);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(255, 107, 0, 0.25);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }

        .find-meals-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .find-meals-btn:hover::before {
            left: 100%;
        }

        .find-meals-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 28px rgba(255, 107, 0, 0.35);
        }

        .find-meals-btn:active {
            transform: translateY(0);
        }

        /* Meal Suggestions Layout */
        .meal-suggestions-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f8f9fa;
            z-index: 1400;
            overflow: hidden;
            animation: slideInUp 0.4s ease;
        }

        .suggestions-layout {
            display: flex;
            height: 100vh;
        }

        .suggestions-main {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
        }

        .meal-suggestions-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e9ecef;
            max-width: 100%;
        }

        .meal-suggestions-header h2 {
            color: var(--dark);
            font-size: 2rem;
            margin: 0;
            font-weight: 700;
            line-height: 1.3;
        }

        .close-suggestions {
            background: #f8f9fa;
            border: none;
            font-size: 28px;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 10px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-suggestions:hover {
            background: #e9ecef;
            color: #495057;
            transform: scale(1.1);
        }

        .suggested-meals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            max-width: 100%;
        }

        .suggested-meal-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #e9ecef;
            position: relative;
        }

        .suggested-meal-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(255, 107, 0, 0.15);
            border-color: rgba(255, 107, 0, 0.3);
        }

        .suggested-meal-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .suggested-meal-card:hover .suggested-meal-image {
            transform: scale(1.05);
        }

        .suggested-meal-info {
            padding: 20px;
        }

        .suggested-meal-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
            line-height: 1.4;
        }

        .suggested-meal-description {
            color: #6c757d;
            margin-bottom: 16px;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .meal-tags {
            display: flex;
            gap: 6px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .meal-tag {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            border: 1px solid;
        }

        .tag-spicy {
            background: #ffe6e6;
            color: #d32f2f;
            border-color: #ffcdd2;
        }

        .tag-mild {
            background: #fff3e0;
            color: #f57c00;
            border-color: #ffe0b2;
        }

        .tag-none {
            background: #f3e5f5;
            color: #7b1fa2;
            border-color: #e1bee7;
        }

        .tag-medium {
            background: #ffecb3;
            color: #f9a825;
            border-color: #fff176;
        }

        .tag-vegetarian {
            background: #e8f5e8;
            color: #388e3c;
            border-color: #c8e6c9;
        }

        .tag-low-carb {
            background: #e3f2fd;
            color: #1976d2;
            border-color: #bbdefb;
        }

        .meal-portion-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(255, 107, 0, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 107, 0, 0.15);
        }

        .portion-text {
            color: #6c757d;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .meal-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .add-to-plan-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, var(--primary), #ff8c00);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .add-to-plan-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .add-to-plan-btn:hover::before {
            left: 100%;
        }

        .add-to-plan-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(255, 107, 0, 0.3);
        }

        /* Meal Planner Sidebar */
        .meal-planner-sidebar {
            width: 360px;
            background: white;
            border-left: 1px solid #e9ecef;
            display: flex;
            flex-direction: column;
            box-shadow: -4px 0 16px rgba(0, 0, 0, 0.05);
            position: relative;
        }

        .planner-header {
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            background: linear-gradient(135deg, rgba(255, 107, 0, 0.03), rgba(255, 140, 0, 0.03));
        }

        .planner-header h3 {
            margin: 0 0 8px 0;
            color: var(--dark);
            font-size: 1.3rem;
            font-weight: 700;
        }

        .people-badge {
            background: var(--primary);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .planned-meals-list {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .empty-planner {
            text-align: center;
            padding: 40px 16px;
            color: #6c757d;
        }

        .empty-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            opacity: 0.6;
        }

        .empty-planner p {
            font-size: 1rem;
            line-height: 1.5;
        }

        .planned-meal-item {
            background: rgba(255, 107, 0, 0.05);
            border: 1px solid rgba(255, 107, 0, 0.15);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
            animation: slideInRight 0.3s ease;
        }

        .planned-meal-item:hover {
            border-color: rgba(255, 107, 0, 0.3);
            background: rgba(255, 107, 0, 0.08);
            transform: translateX(-2px);
        }

        .planned-meal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
        }

        .planned-meal-name {
            font-weight: 700;
            color: var(--dark);
            font-size: 0.95rem;
            flex: 1;
            line-height: 1.3;
        }

        .remove-from-plan {
            background: none;
            border: none;
            color: #dc3545;
            font-size: 1.1rem;
            cursor: pointer;
            padding: 2px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .remove-from-plan:hover {
            background: rgba(220, 53, 69, 0.1);
            transform: scale(1.1);
        }

        .planned-meal-details {
            font-size: 0.85rem;
            color: #6c757d;
            margin-bottom: 4px;
        }

        .planned-meal-price {
            font-weight: 700;
            color: var(--primary);
            font-size: 1rem;
        }

        .planner-summary {
            padding: 20px;
            border-top: 1px solid #e9ecef;
            background: linear-gradient(135deg, rgba(255, 107, 0, 0.03), rgba(255, 140, 0, 0.03));
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .summary-row.total-price {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary);
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e9ecef;
        }

        .add-all-cart-btn,
        .clear-plan-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .add-all-cart-btn {
            background: linear-gradient(135deg, var(--primary), #ff8c00);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 107, 0, 0.25);
        }

        .add-all-cart-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(255, 107, 0, 0.35);
        }

        .clear-plan-btn {
            background: transparent;
            color: #6c757d;
            border: 1px solid #e9ecef;
        }

        .clear-plan-btn:hover {
            background: rgba(220, 53, 69, 0.08);
            color: #dc3545;
            border-color: #dc3545;
        }

        .no-meals-message {
            text-align: center;
            padding: 60px 32px;
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
        }

        .no-meals-message h3 {
            color: var(--primary);
            font-size: 1.6rem;
            margin-bottom: 16px;
            font-weight: 700;
        }

        .no-meals-message p {
            color: #6c757d;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes modalSlideIn {
            from {
                transform: scale(0.9) translateY(-20px);
                opacity: 0;
            }

            to {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideInUp {
            from {
                transform: translateY(100%);
            }

            to {
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .suggestions-layout {
                flex-direction: column;
                height: 100vh;
                overflow: hidden;
            }

            .meal-planner-sidebar {
                width: 100%;

                min-height: 320px;
                max-height: 40vh;
                border-left: none;
                border-top: 1px solid #e9ecef;
                order: 2;
                flex-shrink: 0;
            }

            .suggestions-main {
                order: 1;
                flex: 1;
                height: auto;
                min-height: 0;
                padding: 20px;
                overflow-y: auto;
            }

            .suggested-meals-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 16px;
            }
        }

        @media (max-width: 768px) {
            .meal-plan-modal {
                width: 95%;
                padding: 24px;
                margin: 10px;
                border-radius: 12px;
            }

            .meal-plan-header h2 {
                font-size: 1.3rem;
            }

            .people-selector,
            .spice-selector {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }

            .people-btn,
            .spice-btn {
                padding: 10px 6px;
                font-size: 0.85rem;
            }

            .suggestions-layout {
                height: 100vh;
                display: flex;
                flex-direction: column;
            }

            .suggestions-main {
                flex: 1;
                min-height: 0;
                padding: 16px;
                overflow-y: auto;
            }

            .suggested-meals-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .meal-suggestions-header {
                padding-bottom: 12px;
                margin-bottom: 20px;
            }

            .meal-suggestions-header h2 {
                font-size: 1.6rem;
            }

            .dietary-checkboxes {
                flex-direction: column;
                gap: 12px;
            }

            .checkbox-label {
                min-width: auto;
                padding: 10px 14px;
            }

            .meal-planner-sidebar {
                height: 300px;
                min-height: 300px;
                max-height: 35vh;
                flex-shrink: 0;
                order: 2;
            }

            .planner-header,
            .planner-summary {
                padding: 16px;
            }

            .planned-meals-list {
                padding: 12px;
                overflow-y: auto;
                flex: 1;
                min-height: 0;
            }
        }

        @media (max-width: 480px) {
            .meal-plan-overlay {
                padding: 12px;
            }

            .meal-plan-modal {
                width: 100%;
                padding: 20px;
                max-height: 95vh;
            }

            .meal-plan-header h2 {
                font-size: 1.2rem;
            }

            .people-selector,
            .spice-selector {
                grid-template-columns: repeat(3, 1fr);
                gap: 6px;
            }

            .people-btn,
            .spice-btn {
                padding: 8px 4px;
                font-size: 0.8rem;
            }

            .meal-form-group label {
                font-size: 1rem;
            }

            .find-meals-btn {
                font-size: 1.1rem;
                padding: 14px;
            }

            .suggestions-layout {
                height: 100vh;
                display: flex;
                flex-direction: column;
            }

            .suggestions-main {
                flex: 1;
                min-height: 0;
                padding: 12px;
                overflow-y: auto;
            }

            .meal-suggestions-header h2 {
                font-size: 1.4rem;
            }

            .suggested-meal-info {
                padding: 16px;
            }

            .meal-planner-sidebar {
                height: 280px;
                min-height: 280px;
                max-height: 30vh;
                flex-shrink: 0;
                order: 2;
            }

            .planner-header {
                padding: 14px;
            }

            .planner-summary {
                padding: 14px;
            }

            .planned-meals-list {
                padding: 10px;
                overflow-y: auto;
                flex: 1;
                min-height: 0;
            }

            .empty-planner {
                padding: 30px 16px;
            }

            .empty-icon {
                font-size: 2rem;
            }
        }


        .add-to-cart {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 500;
        }

        .add-to-cart:hover {
            background-color: #e05d00;
        }

        .how-it-works {
            background-color: var(--light);
        }

        .steps {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }

        .step {
            flex: 1;
            min-width: 250px;
            text-align: center;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .step-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }

        .step h3 {
            margin-bottom: 15px;
        }

        .delivery-options {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }
        .checkout-form .delivery-type input[type="radio"] {
  accent-color: #1976d2;
}



        .delivery-option {
            flex: 1;
            min-width: 300px;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .delivery-option h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .delivery-option h3 i {
            margin-right: 10px;
            color: var(--primary);
        }

        .checkout-form .form-group {
            margin-bottom: 20px;
        }

        .checkout-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        
        .checkout-form select,
        .checkout-form input,
        .checkout-form textarea {
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            border:1px solid #ddd  ;
            font-size: 1rem;
            background-color: white;
            
            color: #212529;
        }


        .checkout-form .delivery-type {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .checkout-form .delivery-type label {
            display: flex;
            align-items: center;
            cursor: pointer;
            border-color: #000000;
        }

        .checkout-form .delivery-type input {
            width: auto;
            margin-right: 8px;
            background-color: #1976d2;
        }

        footer {
            background-color: var(--secondary);
            color: white;
            padding: 50px 0 20px;
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col {
            flex: 1;
            min-width: 250px;
        }

        .footer-col h3 {
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .action-btn,
        .footer-col p,
        .footer-col a {
            margin-bottom: 10px;
            display: block;
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-col a:hover {
            color: var(--primary);
        }

        .social a {
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.3s;
        }

        .social :hover {
            color: var(--primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #383838;
            color: #adb5bd;
            font-size: 0.9rem;
        }




        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background-color: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transition: right 0.3s;
            z-index: 1000;
            padding: 20px;
            padding-bottom: 80px;
            max-height: 100vh;
            overflow-y: auto;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 22px;
            cursor: pointer;
            color: var(--dark);
        }

        .cart-items {
            margin-bottom: 30px;
        }

        .cart-item {
            display: flex;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .cart-item-img {
            width: 80px;
            height: 80px;
            border-radius: 5px;
            object-fit: cover;
            margin-right: 15px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--primary);
            font-weight: 500;
            margin-bottom: 10px;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            background-color: var(--light-gray);
            border: none;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .quantity-input {
            width: 40px;
            height: 30px;
            text-align: center;
            margin: 0 8px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
        }

        .cart-item-remove {
            color: #dc3545;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            margin-left: 15px;
        }

        .cart-summary {
            border-top: 1px solid var(--light-gray);
            padding-top: 20px;
            position: sticky;
            bottom: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.1);
        }

        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .cart-summary-row.total {
            font-weight: bold;
            font-size: 18px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--light-gray);
        }

        .checkout-btn {
            width: 100%;
            padding: 15px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }



        .modal {
            max-height: 90vh;
            overflow-y: auto;
        }

        .checkout-btn:hover {
            background-color: #e05d00;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 999;
        }

        .overlay.open {
            visibility: visible;
            opacity: 1;
        }

        
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal.open {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 22px;
            cursor: pointer;
        }

        /* Modal styles */
        .status-modal {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            max-width: 90vw;
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.15);
            display: none;
            flex-direction: column;
            z-index: 2000;
            transition: all 0.3s ease;
        }

        .status-modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;

            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            border: 2px solid #ff8c00;
        }

        .status-message {
            font-size: 24px;
            margin-bottom: 20px;
            color: #333;
            font-weight: 600;
        }

        .status-icon {
            font-size: 48px;
            margin-bottom: 20px;
            color: #ff8c00;
        }

        .progress-bar {
            height: 10px;
            background-color: #f1f1f1;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: #ff8c00;
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Review form styles */
        .review-form {
            display: none;
            margin-top: 20px;
            text-align: left;
        }

        .review-form h3 {
            color: #ff8c00;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
            border-color: #000000;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            border-color: #000000;
            color: black;
        }



        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .star-rating {
            margin: 10px 0;
        }

        .star {
            font-size: 30px;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.active {
            color: #ff8c00;
        }

        .submit-review {
            background-color: #ff8c00;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-review:hover {
            background-color: #e67e00;
        }

        .how-to-cook-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 500;
        }

        .how-to-cook-btn:hover {
            background-color: #e05d00;
        }

        .qty-btn {
            margin: 0 5px;
            padding: 4px 8px;
            font-size: 1rem;
            background: #eee;
            border: 1px solid #ccc;
            cursor: pointer;
            border-radius: 4px;
        }


        /* Popup Styling */
        .cooking-popup {
            display: none;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 8px;
            border: 1px solid #ff8c00;
            box-shadow: 0 4px 12px rgba(255, 140, 0, 0.3);
            width: 280px;
            max-width: 90vw;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .cooking-popup.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .cooking-popup-content {
            padding: 12px;
            color: rgb(255, 255, 255);
        }

        .cooking-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ff8c00;
            padding-bottom: 8px;
            margin-bottom: 10px;
        }

        .cooking-popup-title {
            margin: 0;
            color: #ff8c00;
            font-size: 1.1rem;
        }

        .cooking-popup-close {
            background: none;
            border: none;
            color: #ff8c00;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .cooking-popup-body {
            font-size: 0.9rem;
        }

        .cooking-step {
            margin-bottom: 8px;
            display: flex;
        }

        .step-number {
            color: #ff8c00;
            font-weight: bold;
            margin-right: 8px;
            flex-shrink: 0;
            width: 20px;
        }


        /* Responsive styles */
        @media (max-width: 760px) {
            .cooking-popup {
                left: 50% !important;
                top: 50% !important;
                transform: translate(-50%, -50%) !important;
                position: fixed !important;
                width: 70vw;
                max-width: 90vw;
            }
        }

        @media (max-width: 1600px) {
            .cooking-popup {
                left: 50% !important;
                top: 50% !important;
                transform: translate(-50%, -50%) !important;
                position: fixed !important;
                width: 60vw;
                max-width: 90vw;
            }
        }

        @media (max-width: 768px) {
            .header-inner {
                flex-direction: column;
                text-align: center;
            }

            nav ul {
                margin-top: 20px;
            }

            nav ul li {
                margin: 0 10px;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .products {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .cart-sidebar {
                width: 90%;
                right: -100%;
            }

            .add-to-cart {
                padding: 5px 10px;


            }
        }

        /* Mobile Toggle Button - Only visible on small screens */
        .planner-toggle-btn {
            display: none;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: auto;
            flex-shrink: 0;
        }

        .planner-toggle-btn:hover {
            opacity: 0.9;
        }

        .planner-toggle-btn:active {
            transform: scale(0.98);
        }

        /* Update planner header to flex layout for button positioning */
        @media (max-width: 768px) {
            .planner-header {
                flex-shrink: 0;
            }

            .planner-header-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .planner-toggle-btn {
                display: block;
            }

            /* Fix the sidebar height issue on mobile */
            .meal-planner-sidebar {
                display: flex;
                flex-direction: column;
                height: 320px;
                min-height: 320px;
                max-height: 40vh;
            }

            /* In collapsed mode, prioritize summary over meals list */
            .planned-meals-list {
                flex: 1 1 auto;
                min-height: 0;
                overflow-y: auto;
                /* Calculate available space: total height - header - summary */
                max-height: calc(100% - 120px - 140px);
            }

            /* Ensure summary (Add to Cart) is always visible and prioritized */
            .planner-summary {
                flex-shrink: 0;
                flex-grow: 0;
            }


            /* Full-screen mode styles */
            .meal-planner-sidebar.full-screen {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                z-index: 1500;
                border-left: none;
                max-height: none;
                display: flex;
                flex-direction: column;
            }

            /* Full-screen planned meals list */
            .meal-planner-sidebar.full-screen .planned-meals-list {
                flex: 1;
                max-height: none;
                min-height: 0;
                overflow-y: auto;
            }

            /* Hide suggestions when planner is full-screen */
            .suggestions-main.hidden {
                display: none;
            }

            /* Ensure summary is always visible */
            .planner-summary {
                flex-shrink: 0;
            }
        }

        @media (max-width: 480px) {
            .meal-planner-sidebar {
                height: 280px;

                max-height: 30vh;
            }

            /* Adjust for smaller screens */
            .planned-meals-list {
                max-height: calc(100% - 100px - 120px);
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-inner">
                <div class="logo">
                    <span class="logo-icon">🍲</span>
                    <span>Just</span> <span>Cook</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#products">Products</a></li>
                        <li><a href="#how-it-works">How It Works</a></li>
                        <li><a href="#delivery">Delivery</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li>
                            <div class="cart-icon" id="cart-icon">
                                <span>🛒</span>
                                <span class="cart-count">0</span>
                            </div>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div id="hours-banner"
        style="display: none; background-color: #ff4444; color: white; padding: 15px; text-align: center; font-weight: bold;">
        We are currently closed. Orders are available from 11:00 AM to 5:00 PM.
    </div>


    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1><span style="color: var(--primary);">Just Cook</span></h1>
            <p>Premium ingredients, perfectly portioned, seasoned and ready for you to cook at home. Restaurant quality
                meals without the hassle.</p>
            <a href="#products" class="btn btn-primary">Shop Now</a>
            <a href="#how-it-works" class="btn btn-outline">How It Works</a>
        </div>
    </section>
    <button class="btn btn-primary plan-meal-btn" onclick="openMealPlanModal()">
        <i class="fas fa-utensils"></i> Plan My Meal
    </button>




    <!-- Products Section -->
    <section class="section" id="products">
        <div class="container">
            <h2 class="section-title">Our <span>Products</span></h2>
            <div class="products" id="product-container">
                <!-- Products will be loaded here by JavaScript -->
            </div>
        </div>
    </section>
    <div class="cooking-popup" id="cooking-popup">
        <div class="cooking-popup-content">
            <div class="cooking-popup-header">
                <h3 class="cooking-popup-title">How to Cook <span id="dish-name"></span></h3>
                <button class="cooking-popup-close">&times;</button>
            </div>
            <div class="cooking-popup-body" id="cooking-steps">
                <!-- Steps will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- How It Works Section -->
    <section class="section how-it-works" id="how-it-works">
        <div class="container">
            <h2 class="section-title">How It <span>Works</span></h2>
            <div class="steps">
                <div class="step">
                    <div class="step-icon">1</div>
                    <h3>Choose Your Meals</h3>
                    <p>Browse our menu and select the meals you want to cook at home.</p>
                </div>
                <div class="step">
                    <div class="step-icon">2</div>
                    <h3>We Prepare</h3>
                    <p>We prepare all ingredients, seasonings, and sauces, portioned perfectly for you.</p>
                </div>
                <div class="step">
                    <div class="step-icon">3</div>
                    <h3>Delivery or Pickup</h3>
                    <p>Get your meals delivered or pick them up from our store.</p>
                </div>
                <div class="step">
                    <div class="step-icon">4</div>
                    <h3>Just Cook & Enjoy</h3>
                    <p>Follow our simple instructions to cook and enjoy your delicious meal!</p>
                </div>
            </div>
        </div>
    </section>

    <div id="mealPlanModal" class="meal-plan-overlay">
        <div class="meal-plan-modal">
            <div class="meal-plan-header">
                <h2>🍽️ Let's Plan Your Perfect Meal!</h2>
                <button class="close-meal-modal" onclick="closeMealPlanModal()">&times;</button>
            </div>
            <form id="mealPlanForm" class="meal-plan-form">
                <div class="meal-form-group">
                    <label>👥 How many people to feed?</label>
                    <div class="people-selector">
                        <button type="button" class="people-btn" data-count="1">1</button>
                        <button type="button" class="people-btn" data-count="2">2</button>
                        <button type="button" class="people-btn" data-count="3">3</button>
                        <button type="button" class="people-btn" data-count="4">4</button>
                        <button type="button" class="people-btn" data-count="5">5</button>
                        <button type="button" class="people-btn" data-count="6">6</button>
                        <button type="button" class="people-btn" data-count="7">7</button>
                        <button type="button" class="people-btn" data-count="8">8</button>
                        <button type="button" class="people-btn" data-count="9">9</button>
                        <button type="button" class="people-btn" data-count="10">10</button>
                    </div>
                </div>

                <div class="meal-form-group">
                    <label>🔥 Maximum spice level?</label>
                    <div class="spice-selector">
                        <button type="button" class="spice-btn" data-spice="None">🥛 None</button>
                        <button type="button" class="spice-btn" data-spice="Mild">🌶️ Mild</button>
                        <button type="button" class="spice-btn" data-spice="Medium">🌶️🌶️ Medium</button>
                        <button type="button" class="spice-btn" data-spice="Spicy">🌶️🔥 Spicy</button>
                    </div>
                </div>

                <div class="meal-form-group">
                    <label>🥗 Dietary preferences</label>
                    <div class="dietary-checkboxes">
                        <label class="checkbox-label">
                            <input type="checkbox" id="vegetarian">
                            <span class="checkmark"></span>
                            🌱 Vegetarian Only
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="lowCarb">
                            <span class="checkmark"></span>
                            🥩 Low-Carb Only
                        </label>
                    </div>
                </div>

                <button type="submit" class="find-meals-btn">Find Perfect Meals! ✨</button>
            </form>
        </div>
    </div>

    <!-- Meal Suggestions with Planner Sidebar -->
    <div id="mealSuggestions" class="meal-suggestions-container" style="display: none;">
        <div class="suggestions-layout">
            <!-- Main Content Area -->
            <div class="suggestions-main">
                <div class="meal-suggestions-header">
                    <h2>✨ Your Perfect Meal Suggestions</h2>
                    <button class="close-suggestions" onclick="closeMealSuggestions()">&times;</button>
                </div>
                <div id="suggestedMeals" class="suggested-meals-grid"></div>
            </div>

            <!-- Meal Planner Sidebar -->
            <div id="mealPlannerSidebar" class="meal-planner-sidebar">
                <div class="planner-header">
                    <h3>🍽️ Your Meal Plan</h3>
                    <span id="plannerPeopleCount" class="people-badge">For 0 people</span>
                    <button class="planner-toggle-btn" id="plannerToggleBtn">
                        <span class="toggle-text">Expand</span>
                    </button>
                </div>

                <div id="plannedMealsList" class="planned-meals-list">
                    <div class="empty-planner">
                        <div class="empty-icon">🍽️</div>
                        <p>Add meals to start building your perfect plan!</p>
                    </div>
                </div>

                <div class="planner-summary" id="plannerSummary" style="display: none;">
                    <div class="summary-row">
                        <span>Total Portions:</span>
                        <span id="totalPortions">0</span>
                    </div>
                    <div class="summary-row">
                        <span>Total Items:</span>
                        <span id="totalItems">0</span>
                    </div>
                    <div class="summary-row total-price">
                        <span>Total Price:</span>
                        <span id="totalPrice">$0</span>
                    </div>
                    <button id="addAllToCart" class="add-all-cart-btn" onclick="addAllToCart()">
                        🛒 Add All to Cart
                    </button>
                    <button class="clear-plan-btn" onclick="clearMealPlan()">
                        🗑️ Clear Plan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delivery Section -->
    <section class="section" id="delivery">
        <div class="container">
            <h2 class="section-title">Delivery <span>Options</span></h2>
            <div class="delivery-options">
                <div class="delivery-option">
                    <h3><i>🚚</i> Home Delivery</h3>
                    <p>We deliver to your doorstep in Ramallah and it's villages. Delivery is available 7 days a
                        week from 10 AM to 5 PM.</p>
                    <p>Delivery fee is based on your location<br> </p>
                    <p>Average delivery time: 40-60 minutes</p>
                </div>
                <div class="delivery-option">
                    <h3><i>🏬</i> Store Pickup</h3>
                    <p>Order online and pick up at our store at your convenience. Your order will be ready in 30
                        minutes.</p>
                    <p>Store address:<br>Ramallah<br>Ein Musbah, Main street, next to Al-Kamal supermarket</p>
                    <p>pickup hours: 9 AM - 5 PM daily</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="section" id="about">
        <div class="container">
            <h2 class="section-title">About <span>Us</span></h2>
            <div style="display: flex; flex-wrap: wrap; gap: 40px; align-items: center;">
                <div style="flex: 1; min-width: 300px;">
                    <img src="images/sidepic.png" alt="Our Store" style="width: 100%; border-radius: 10px;">
                </div>
                <div style="flex: 1; min-width: 300px;">
                    <h3 style="margin-bottom: 20px; color: var(--primary); font-size: 1.8em;">Our Story</h3>
                    <p style="margin-bottom: 15px;font-size: 1.5em;">At Just Cook, we believe everyone should be able to
                        enjoy delicious,
                        home-cooked meals without the hassle of shopping, measuring, and prepping ingredients.</p>
                    <p style="margin-bottom: 15px;font-size: 1.5em;">We started in 2023 with a simple mission: to make
                        cooking at home
                        easier, faster, and more enjoyable. Our culinary team prepares everything you need – from
                        premium ingredients to perfect seasonings – so you can focus on the fun part: cooking and
                        enjoying your meal.</p>
                    <p style="font-size: 1.5em">All our ingredients are locally sourced whenever possible, and we're
                        committed to sustainability
                        in all aspects of our business.</p>
                </div>
            </div>
        </div>
    </section>

    <div id="statusModal" class="status-modal">
        <div class="status-modal-content">
            <div class="status-icon">📦</div>
            <div id="statusMessage" class="status-message">Your order is being prepared...</div>
            <div class="progress-bar">
                <div id="progressBarFill" class="progress-bar-fill"></div>

            </div>

            <!-- Review Form (initially hidden) -->
            <div id="reviewForm" class="review-form">
                <h3>Please Rate Your Experience</h3>
                <div class="form-group">
                    <label for="reviewName">Name:</label>
                    <input type="text" id="reviewName" placeholder="Your name">
                </div>
                <div class="form-group">
                    <label>Rating:</label>
                    <div class="star-rating" id="starRating">
                        <span class="star" data-value="1">★</span>
                        <span class="star" data-value="2">★</span>
                        <span class="star" data-value="3">★</span>
                        <span class="star" data-value="4">★</span>
                        <span class="star" data-value="5">★</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="reviewComment">Comments:</label>
                    <textarea id="reviewComment" rows="4" placeholder="Tell us about your experience"></textarea>
                </div>
                <button class="submit-review" id="submitReview">Submit Review</button>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h3>Contact Us</h3>
                    <p>📞 00972569899999</p>
                    <p>📞 00972594777733</p>
                    <p>🏬 Ramallah, Ein Musbah, Main street, next to Al-Kamal supermarket / close to Ajeenati bakery</p>
                </div>
                <div class="footer-col">
                    <h3>Opening Hours</h3>
                    <p>Pickup: Daily 9 AM - 5 PM</p>

                    <p>Delivery: Daily 10 AM - 5 PM</p>
                </div>
                <div class="footer-col">

                    <h3>Our Social Media</h3>
                    <div class="social">
                        <a href="https://www.facebook.com/profile.php?id=61550867874458&rdid=9cGyc6it8lzNTVFc&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F16CzWi5nt9#"
                            target="_blank">
                            <p>Facebook</p>
                        </a>
                        <a href="https://www.instagram.com/justcook.pal/" target="_blank">
                            <p>Instagram</p>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-col">
                <h3>Quick Links</h3>
                <a href="#products">Products</a>
                <a href="#how-it-works">How It Works</a>
                <a href="#delivery">Delivery Options</a>
                <a href="#about">About Us</a>


            </div>

        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Jaber.co All rights reserved.</p>
        </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button class="close-cart" id="close-cart">×</button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Cart items will be added here dynamically -->
        </div>
        <div class="cart-summary">
            <div class="cart-summary-row">
                <span>Subtotal:</span>
                <span id="cart-subtotal">0.00 Nis</span>
            </div>

            <div class="cart-summary-row total">
                <span>Total:</span>
                <span id="cart-total">00 Nis</span>
            </div>
            <button class="checkout-btn" id="checkout-btn">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Checkout Modal -->
    <div class="modal" id="checkout-modal">
        <div class="modal-header">
            <h3>Checkout</h3>
            <button class="close-modal" id="close-modal">×</button>
        </div>
        <form class="checkout-form" action="https://formsubmit.co/talal123542006@gmail.com" method="POST">
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="Full Name" required>
            </div>

            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="Phone Number" required>
            </div>
            <div class="form-group">
                <label>Delivery Option</label>
                <div class="delivery-type">
                    <label>
                        <input type="radio" name="delivery" value="delivery" checked> Delivery
                    </label>
                    <label>
                        <input type="radio" name="delivery" value="pickup"> Store Pickup
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="contact">Preferred Contact Method</label>
                <select id="contact" onchange="toggleContactFields()">

                    <option value="phone">phone</option>
                    <option value="whatsapp">WhatsApp</option>
                </select>
            </div>


            <div class="form-group delivery-address">
                <label for="city">City</label>
                <select id="city">
                    <option value="ramallah">رام الله</option>

                    <option value="villages">قرى رام الله</option>
                </select>
            </div>

            <div class="form-group delivery-address">
                <label for="address">Delivery Address</label>
                <input type="text" id="address" name="Delivery Address" placeholder="Specify your address please">
            </div>



            <div class="form-group">
                <label for="payment">Payment Method</label>
                <select id="payment">
                    <option value="card">Credit/Debit Card (via machine)</option>

                    <option value="cash">Cash</option>
                </select>
            </div>
            <div class="form-group">
                <label for="notes">Special Instructions</label>
                <textarea id="notes" name="Special Instructions" rows="3"></textarea>
            </div>
            <input type="hidden" name="_subject" value="New Order from Just Cook">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_template" value="table">



            <button type="submit" class="checkout-btn">Complete Order</button>
        </form>
    </div>
    <script>


        // Cart functionality
        let cart = [];
        let deliveryFee = 15; // Default delivery fee
        const freeDeliveryThreshold = 150;

        // DOM Elements
        const productContainer = document.getElementById('product-container');
        const cartIcon = document.getElementById('cart-icon');
        const cartSidebar = document.getElementById('cart-sidebar');
        const closeCart = document.getElementById('close-cart');
        const overlay = document.getElementById('overlay');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartSubtotal = document.getElementById('cart-subtotal');
        const cartDelivery = document.getElementById('cart-delivery');
        const cartTotal = document.getElementById('cart-total');
        const cartCount = document.querySelector('.cart-count');
        const checkoutBtn = document.getElementById('checkout-btn');
        const closeModal = document.getElementById('close-modal');
        const checkoutModal = document.getElementById('checkout-modal');
        const deliveryOptions = document.querySelectorAll('input[name="delivery"]');
        const deliveryAddressFields = document.querySelectorAll('.delivery-address');
        const body = document.body;

        const SHEETDB_API_URL = "https://sheetdb.io/api/v1/o3okeg0qb05on";
        SHEETDB_API_URL2 = "https://sheetdb.io/api/v1/ughkg71ixwwo3";
        const CHECK_INTERVAL = 10000; // 10000 seconds

        // Order tracking variables
        let orderId = null;
        let orderStatus = 0; // 0:placing, 1: preparing, 2: on the way, 3: arrived
        let statusCheckInterval = null;
        let rating = 0;
        let deliveryMethod = 'delivery'; // default

        const products = [
            { id: 1, name: "ورق عنب", description: "Stuffed vine leaves with rice and meat", price: 30, image: "images/vine.jpg", spice: "Mild", vegetarian: false, lowCarb: false, portion: 2 },
            { id: 2, name: "خضروات مقطعة", description: "Chopped vegetables for Maqlouba", price: 25, image: "images/vegetables.jpg", spice: "None", vegetarian: true, lowCarb: false, portion: 2 },
            { id: 3, name: "ملفوف", description: "Cabbage stuffed with rice and meat", price: 30, image: "images/malfouf.jpg", spice: "Mild", vegetarian: false, lowCarb: false, portion: 2 },
            { id: 4, name: "كوسا مخشي", description: "Zucchini stuffed with meat and onions", price: 30, image: "images/mukhshi.jpg", spice: "Medium", vegetarian: false, lowCarb: true, portion: 2 },
            { id: 5, name: "سمك سالمون", description: "Salmon with herbs and vegetables", price: 55, image: "images/salmon.jpg", spice: "None", vegetarian: false, lowCarb: true, portion: 1 },
            { id: 6, name: "كوسا محفور", description: "Cored zucchini for stuffing", price: 20, image: "images/zucchini.jpg", spice: "None", vegetarian: true, lowCarb: true, portion: 1 },
            { id: 7, name: "كبة", description: "Fried bulgur dumplings with meat and onions", price: 35, image: "images/kubbeh.jpg", spice: "Spicy", vegetarian: false, lowCarb: false, portion: 2 },
            { id: 8, name: "دجاجة محشوة مع ورق عنب", description: "Whole chicken stuffed with vine leaves and rice", price: 65, image: "images/chicken.jpg", spice: "Mild", vegetarian: false, lowCarb: true, portion: 4 }
        ];

        // Global state
        let currentMealPlan = [];
        let plannerPreferences = {
            people: 0,
            maxSpice: "None",
            vegetarian: false,
            lowCarb: false
        };

        orderId = generateOrderID();

        // Cooking instructions for your dishes
        const cookingInstructions = {
            '1': { // ورق عنب
                name: 'Stuffed Vine Leaves',
                steps: [
                    'Rinse the vine leaves gently and remove any tough stems.',
                    'In a bowl, mix the rice and meat filling with spices.',
                    'Place a small amount of filling on each vine leaf.',
                    'Roll tightly, folding in the sides as you roll.',
                    'Arrange in a pot with water and cook for 45-60 minutes.',
                    'Serve hot with yogurt or lemon sauce.'
                ]
            },
            '2': { // خضروات مقطعة
                name: 'Chopped Vegetables for Maqlouba',
                steps: [
                    'Wash all vegetables thoroughly under cold water.',
                    'Cut eggplant, cauliflower, and potatoes into large pieces.',
                    'Soak eggplant in salted water for 15 minutes.',
                    'Fry vegetables lightly in oil until golden.',
                    'Layer with rice and meat in a pot.',
                    'Cook with broth for 30-40 minutes, then flip to serve.'
                ]
            },
            '3': { // ملفوف
                name: 'Stuffed Cabbage (Malfouf)',
                steps: [
                    'Blanch cabbage leaves in boiling water for 3-4 minutes.',
                    'Remove leaves carefully and let them cool.',
                    'Mix rice, meat, and spices for the filling.',
                    'Place filling on each cabbage leaf and roll tightly.',
                    'Arrange in a pot with tomato sauce and water.',
                    'Simmer for 1 hour until tender. Serve hot.'
                ]
            },
            '4': { // كوسا مخشي
                name: 'Stuffed Zucchini',
                steps: [
                    'Core the zucchini carefully, leaving the walls intact.',
                    'Prepare filling with meat, onions, and rice.',
                    'Stuff each zucchini with the filling mixture.',
                    'Arrange in a pot with tomato sauce and water.',
                    'Cook on medium heat for 45 minutes.',
                    'Serve with yogurt and fresh herbs.'
                ]
            },
            '5': { // سمك سالمون
                name: 'Salmon with Herbs',
                steps: [
                    'Pat salmon fillets dry and season with salt and pepper.',
                    'Heat olive oil in a pan over medium-high heat.',
                    'Cook salmon skin-side down for 4-5 minutes.',
                    'Flip and cook for another 3-4 minutes.',
                    'Add herbs and vegetables to the pan.',
                    'Serve immediately with lemon wedges.'
                ]
            },
            '6': { // كوسا محفور
                name: 'Cored Zucchini',
                steps: [
                    'Wash zucchini and trim the ends.',
                    'Use a corer to hollow out the zucchini carefully.',
                    'Keep the walls about 1/4 inch thick.',
                    'Rinse out any remaining pulp.',
                    'Now ready to be stuffed with your favorite filling.',
                    'Can be frozen for later use if needed.'
                ]
            },
            '7': { // كبة
                name: 'Kubbeh (Stuffed Bulgur)',
                steps: [
                    'Soak fine bulgur in water for 30 minutes.',
                    'Drain and mix with ground meat and spices.',
                    'Form the outer shell in your palm.',
                    'Add the meat and onion filling inside.',
                    'Seal and shape into football shapes.',
                    'Deep fry until golden brown or boil in broth.'
                ]
            },
            '8': { // دجاجة محشوة
                name: 'Stuffed Chicken with Vine Leaves',
                steps: [
                    'Clean the whole chicken inside and out.',
                    'Prepare rice and vine leaf stuffing with spices.',
                    'Stuff the chicken cavity with the mixture.',
                    'Secure the opening with toothpicks or string.',
                    'Roast in oven at 375°F for 1.5-2 hours.',
                    'Let rest for 10 minutes before carving and serving.'
                ]
            }
        };

        // Function to show the status modal
        function showStatusModal(id) {
            deliveryMethod = document.querySelector('input[name="delivery"]:checked').value;
            orderId = id;
            orderStatus = 0; // Reset on new order
            document.getElementById('statusModal').style.display = 'flex';
            updateStatusUI('📝 Placing your order...', '10%', '📝');

            // Start polling
            checkOrderStatus();
            statusCheckInterval = setInterval(checkOrderStatus, CHECK_INTERVAL);
        }
        function updateStatusUI(message, progress, emoji) {
            document.getElementById('statusMessage').textContent = message;
            document.getElementById('progressBarFill').style.width = progress;
            document.querySelector('.status-icon').textContent = emoji;
        }


        // Function to check order status from SheetDB
        function checkOrderStatus() {
            // Fetch the order status from SheetDB (filter by order ID)
            fetch(`${SHEETDB_API_URL}/search?order_id=${orderId}`)
                .then(response => response.json())
                .then(data => {
                    if (data && data.length > 0) {
                        updateOrderStatus(data[0]);
                    } else {
                        console.warn("⚠️ Order not found. Check order_id:", orderId);
                    }

                })
                .catch(error => {
                    console.error('Error fetching order status:', error);
                });
        }

        // Function to update the order status display
        function updateOrderStatus(orderData) {
            const isPreparing = orderData.is_preparing === true ||
                orderData.is_preparing === 'TRUE' ||
                orderData.is_preparing === 'true';

            const isOnTheWay = orderData.is_on_the_way === true ||
                orderData.is_on_the_way === 'TRUE' ||
                orderData.is_on_the_way === 'true';

            const hasArrived = orderData.has_arrived === true ||
                orderData.has_arrived === 'TRUE' ||
                orderData.has_arrived === 'true';

            console.log('🔍 Status Check:', { isPreparing, isOnTheWay, hasArrived, deliveryMethod });

            if (isPreparing && orderStatus < 1) {
                orderStatus = 1;
                updateStatusUI('🍳 Preparing your order...', '30%', '🕒');
            }

            else if (orderStatus < 2) {
                if (deliveryMethod === 'delivery' && isOnTheWay) {
                    orderStatus = 2;
                    updateStatusUI('🛵 Your order is on the way!', '60%', '🚚');
                } else if (deliveryMethod === 'pickup' && isOnTheWay) {
                    orderStatus = 2;
                    updateStatusUI('🎁 Your order is ready for pickup!', '60%', '📦');
                }
            }
            if (hasArrived && orderStatus < 3) {
                orderStatus = 3;

                if (deliveryMethod === 'delivery') {
                    updateStatusUI('✅ Your order has arrived!', '100%', '🎉');
                } else if (deliveryMethod === 'pickup') {
                    updateStatusUI('✅ Your order has been picked up!', '100%', '🙌');
                }

                clearInterval(statusCheckInterval);
                setTimeout(showReviewForm, 2000);
            }
        }

        // Function to show the review form
        function showReviewForm() {
            document.getElementById('reviewForm').style.display = 'block';
        }

        function initPlannerToggle() {
            const toggleBtn = document.getElementById('plannerToggleBtn');
            const sidebar = document.querySelector('.meal-planner-sidebar');
            const suggestionsMain = document.querySelector('.suggestions-main');
            const toggleText = toggleBtn?.querySelector('.toggle-text');

            if (!toggleBtn || !sidebar || !suggestionsMain) return;

            toggleBtn.addEventListener('click', function () {
                const isFullScreen = sidebar.classList.contains('full-screen');

                if (isFullScreen) {
                    // Collapse to sidebar
                    sidebar.classList.remove('full-screen');
                    suggestionsMain.classList.remove('hidden');
                    toggleText.textContent = 'Expand';
                } else {
                    // Expand to full-screen
                    sidebar.classList.add('full-screen');
                    suggestionsMain.classList.add('hidden');
                    toggleText.textContent = 'Collapse';
                }
            });
        }

        // Initialize when meal suggestions are shown
        // Call this function when meal suggestions container becomes visible
        initPlannerToggle();

        // Function to lock body scroll
        function lockBodyScroll() {
            const scrollY = window.scrollY;
            body.style.position = 'fixed';
            body.style.top = `-${scrollY}px`;
            body.style.width = '100%';
            body.dataset.scrollY = scrollY;
        }

        // Function to unlock body scroll
        function unlockBodyScroll() {
            if (body.style.position === 'fixed') {
                const scrollY = parseInt(body.dataset.scrollY || '0');
                body.style.position = '';
                body.style.top = '';
                body.style.width = '';
                window.scrollTo(0, scrollY);
            }
        }

        let isStatusCollapsed = false;

        function toggleStatusModal() {
            const modal = document.getElementById('statusModal');
            isStatusCollapsed = !isStatusCollapsed;

            if (isStatusCollapsed) {
                modal.classList.add('collapsed');
            } else {
                modal.classList.remove('collapsed');
            }
        }

        // Function to setup cooking buttons
        function setupCookingButtons() {
            const buttons = document.querySelectorAll('.how-to-cook-btn');
            const popup = document.getElementById('cooking-popup');

            console.log('Setting up cooking buttons, found:', buttons.length); // Debug

            if (!popup) {
                console.error('Cooking popup element not found! Make sure the HTML is added.');
                return;
            }

            const dishNameElement = document.getElementById('dish-name');
            const cookingSteps = document.getElementById('cooking-steps');
            const closeButton = document.querySelector('.cooking-popup-close');

            // Add click event to each How to Cook button
            buttons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('How to Cook button clicked!'); // Debug log

                    // Get dish ID from data attribute
                    const dishId = this.getAttribute('data-dish');
                    console.log('Dish ID:', dishId); // Debug log

                    const dish = cookingInstructions[dishId];
                    console.log('Found dish:', dish); // Debug log

                    if (!dish) {
                        console.log('No cooking instructions found for dish ID:', dishId);
                        alert('Cooking instructions not available for this dish.');
                        return;
                    }

                    // Update popup content
                    dishNameElement.textContent = dish.name;

                    // Clear previous steps
                    cookingSteps.innerHTML = '';

                    // Add cooking steps
                    dish.steps.forEach((step, index) => {
                        const stepElement = document.createElement('div');
                        stepElement.className = 'cooking-step';

                        const numberElement = document.createElement('div');
                        numberElement.className = 'step-number';
                        numberElement.textContent = (index + 1) + '.';

                        const textElement = document.createElement('div');
                        textElement.className = 'step-text';
                        textElement.textContent = step;

                        stepElement.appendChild(numberElement);
                        stepElement.appendChild(textElement);
                        cookingSteps.appendChild(stepElement);
                    });

                    // Position popup near the button
                    const buttonRect = this.getBoundingClientRect();
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

                    // Smart positioning: only apply on large screens
                    if (window.innerWidth > 600) {
                        popup.style.left = (buttonRect.left + window.pageXOffset) + 'px';
                        popup.style.top = (buttonRect.bottom + scrollTop + 10) + 'px';
                    } else {
                        // For small screens, let CSS center it
                        popup.style.left = '';
                        popup.style.top = '';
                    }

                    // Show popup with animation
                    popup.classList.add('active');
                    console.log('Popup should be visible now'); // Debug
                });
            });

            // Close popup when clicking the close button
            if (closeButton) {
                closeButton.addEventListener('click', function () {
                    popup.classList.remove('active');
                });
            }

            // Close popup when clicking outside
            document.addEventListener('click', function (e) {
                if (popup && popup.classList.contains('active') &&
                    !popup.contains(e.target) &&
                    !e.target.classList.contains('how-to-cook-btn')) {
                    popup.classList.remove('active');
                }
            });
        }

        // Function to display products
        function displayProducts() {
            productContainer.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.classList.add('product-card');
                productCard.innerHTML = `
            <img src="${product.image}" alt="${product.name}" class="product-image">
            <div class="product-info">
                <h3 class="product-title">${product.name}</h3>
                <p class="product-description">${product.description}</p>
                <p class="product-price">${product.price.toFixed(2)} Nis</p>
                <div class="product-actions">
                    <button class="add-to-cart" data-id="${product.id}">Add to Cart</button>
                    <button class="how-to-cook-btn" data-dish="${product.id}">How to Cook</button>
                </div>
            </div>
        `;
                productContainer.appendChild(productCard);
            });

            // Add event listeners to "Add to Cart" buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function () {
                    const productId = parseInt(this.getAttribute('data-id'));
                    addToCart(productId);
                });
            });

            // Setup cooking buttons after products are displayed
            setupCookingButtons();
        }
        const spiceLevels = ["None", "Mild", "Medium", "Spicy"];
        function getSpiceIcon(spice) {
            switch (spice) {
                case "None": return "🥛";
                case "Mild": return "🌶️";
                case "Medium": return "🌶️🌶️";
                case "Spicy": return "🌶️🔥";
                default: return "🌶️";
            }
        }

        // Find a single combination using greedy approach
        function findCombination(meals, targetPeople, startIndex = 0) {
            const combination = [];
            let totalPortions = 0;
            const usedMeals = new Set();

            // Start with a specific meal to create variety
            if (startIndex < meals.length) {
                combination.push(meals[startIndex]);
                totalPortions += meals[startIndex].portion;
                usedMeals.add(meals[startIndex].id);
            }

            // Fill remaining portions
            while (totalPortions < targetPeople && combination.length < 4) {
                const remainingPeople = targetPeople - totalPortions;

                // Find best fitting meal
                const nextMeal = meals.find(meal =>
                    !usedMeals.has(meal.id) &&
                    meal.portion <= remainingPeople + 1 // Allow slight overage
                );

                if (!nextMeal) break;

                combination.push(nextMeal);
                totalPortions += nextMeal.portion;
                usedMeals.add(nextMeal.id);
            }

            return combination;
        }

        // Find optimal meal combinations (prefer fewer meals with larger portions)
        function findOptimalMealCombinations(meals, targetPeople) {
            // Sort meals by portion size (descending) to prefer larger meals
            const sortedMeals = [...meals].sort((a, b) => b.portion - a.portion);

            // Generate multiple valid combinations
            const combinations = [];

            // Try different combinations starting with largest portions
            for (let i = 0; i < Math.min(sortedMeals.length, 8); i++) {
                const combination = findCombination(sortedMeals, targetPeople, i);
                if (combination.length > 0) {
                    combinations.push(combination);
                }
            }

            // If no perfect combinations, suggest meals that come close
            if (combinations.length === 0) {
                combinations.push(sortedMeals.slice(0, Math.min(4, sortedMeals.length)));
            }

            // Return best combinations (fewer meals preferred)
            return combinations
                .sort((a, b) => a.length - b.length)
                .slice(0, 6); // Show up to 6 suggestions
        }

        // Create individual meal card
        function createMealCard(meal) {
            const card = document.createElement('div');
            card.className = 'suggested-meal-card';

            const spiceClass = `tag-${meal.spice.toLowerCase()}`;
            const vegetarianTag = meal.vegetarian ? '<span class="meal-tag tag-vegetarian">🌱 Vegetarian</span>' : '';
            const lowCarbTag = meal.lowCarb ? '<span class="meal-tag tag-low-carb">🥩 Low-Carb</span>' : '';

            card.innerHTML = `
        <img src="${meal.image}" alt="${meal.name}" class="suggested-meal-image" onerror="this.src='images/placeholder.jpg'">
        <div class="suggested-meal-info">
            <h3 class="suggested-meal-title">${meal.name}</h3>
            <p class="suggested-meal-description">${meal.description}</p>
            <div class="meal-tags">
                <span class="meal-tag ${spiceClass}">${getSpiceIcon(meal.spice)} ${meal.spice}</span>
                ${vegetarianTag}
                ${lowCarbTag}
            </div>
            <div class="meal-portion-info">
                <span class="portion-text">Serves ${meal.portion} people</span>
                <span class="meal-price">${meal.price} NIS</span>
            </div>
            <button class="add-to-plan-btn" onclick="addToPlan(${meal.id})">
                ➕ Add to Plan
            </button>
        </div>
    `;

            return card;
        }

        // Show no meals message
        function showNoMealsMessage() {
            const container = document.getElementById('suggestedMeals');
            const suggestionsContainer = document.getElementById('mealSuggestions');

            if (!container || !suggestionsContainer) {
                console.error('Required DOM elements not found:', {
                    suggestedMeals: !!container,
                    mealSuggestions: !!suggestionsContainer
                });
                return;
            }

            container.innerHTML = `
        <div class="no-meals-message">
            <h3>😔 No meals match your preferences</h3>
            <p>Try adjusting your dietary preferences or spice level to see more options.</p>
        </div>
    `;

            // Update planner display
            updatePlannerDisplay();

            // Show suggestions container
            suggestionsContainer.style.display = 'block';
        }

        // ========================================
        // CORE MEAL PLANNING FUNCTIONS
        // ========================================

        // Smart meal suggestion algorithm
        function generateMealSuggestions() {
            console.log('generateMealSuggestions called with preferences:', plannerPreferences);

            const { people, maxSpice, vegetarian, lowCarb } = plannerPreferences;

            // Filter products based on dietary preferences and spice level
            const eligibleMeals = products.filter(product => {
                // Check dietary preferences
                if (vegetarian && !product.vegetarian) return false;
                if (lowCarb && !product.lowCarb) return false;

                // Check spice level (don't exceed max)
                const productSpiceIndex = spiceLevels.indexOf(product.spice);
                const maxSpiceIndex = spiceLevels.indexOf(maxSpice);
                if (productSpiceIndex > maxSpiceIndex) return false;

                return true;
            });

            console.log('Eligible meals found:', eligibleMeals.length);

            if (eligibleMeals.length === 0) {
                showNoMealsMessage();
                return;
            }

            // Generate optimal meal combinations
            const suggestions = findOptimalMealCombinations(eligibleMeals, people);

            console.log('Generated suggestions:', suggestions.length);
            displayMealSuggestions(suggestions);
        }

        // Display meal suggestions
        function displayMealSuggestions(suggestions) {
            const container = document.getElementById('suggestedMeals');
            const suggestionsContainer = document.getElementById('mealSuggestions');

            console.log('displayMealSuggestions called', {
                containerExists: !!container,
                suggestionsContainerExists: !!suggestionsContainer,
                suggestionsCount: suggestions.length
            });

            if (!container || !suggestionsContainer) {
                console.error('Required DOM elements not found for meal suggestions');
                alert('Error: Could not display meal suggestions. Please check that the page has loaded correctly.');
                return;
            }

            container.innerHTML = '';

            if (suggestions.length === 0) {
                showNoMealsMessage();
                return;
            }

            // Flatten all suggestions and remove duplicates
            const allMeals = [...new Map(
                suggestions.flat().map(meal => [meal.id, meal])
            ).values()];

            console.log('Displaying meals:', allMeals.length);

            allMeals.forEach(meal => {
                const card = createMealCard(meal);
                container.appendChild(card);
            });

            // Update planner sidebar
            updatePlannerDisplay();

            // Show suggestions container
            suggestionsContainer.style.display = 'block';
            console.log('Meal suggestions should now be visible');
            lockBodyScroll();
        }

        // Update planner sidebar display
        function updatePlannerDisplay() {
            const peopleCount = document.getElementById('plannerPeopleCount');
            const mealsList = document.getElementById('plannedMealsList');
            const summary = document.getElementById('plannerSummary');
            const totalPortions = document.getElementById('totalPortions');
            const totalItems = document.getElementById('totalItems');
            const totalPrice = document.getElementById('totalPrice');

            // Update people count (if element exists)
            if (peopleCount) {
                peopleCount.textContent = `For ${plannerPreferences.people} people`;
            }

            // Update meals list (if element exists)
            if (mealsList) {
                if (currentMealPlan.length === 0) {
                    mealsList.innerHTML = `
                <div class="empty-planner">
                    <div class="empty-icon">🍽️</div>
                    <p>Add meals to start building your perfect plan!</p>
                </div>
            `;
                    if (summary) summary.style.display = 'none';
                } else {
                    mealsList.innerHTML = currentMealPlan.map(meal => `
    <div class="planned-meal-item">
        <div class="planned-meal-header">
            <span class="planned-meal-name">${meal.name}</span>
            <button class="remove-from-plan" onclick="removeFromPlan(${meal.id})">×</button>
        </div>
        <div class="planned-meal-details">
            <button class="qty-btn" onclick="changePlanQuantity(${meal.id}, -1)">➖</button>
            <span>Quantity: ${meal.quantity}</span>
            <button class="qty-btn" onclick="changePlanQuantity(${meal.id}, 1)">➕</button>
            <span> | Serves ${meal.portion * meal.quantity} people</span>
        </div>
        <div class="planned-meal-price">Price: ${(meal.price * meal.quantity).toFixed(2)} NIS</div>
    </div>
`).join('');




                    // Update summary
                    const portions = currentMealPlan.reduce((sum, meal) => sum + meal.portion * meal.quantity, 0);
                    const items = currentMealPlan.reduce((count, meal) => count + meal.quantity, 0);
                    const price = currentMealPlan.reduce((sum, meal) => sum + (meal.price * meal.quantity), 0);


                    if (totalPortions) totalPortions.textContent = portions;
                    if (totalItems) totalItems.textContent = items;
                    if (totalPrice) totalPrice.textContent = `${price} NIS`;

                    if (summary) summary.style.display = 'block';
                }
            }
        }

        // ========================================
        // MAIN FORM SUBMISSION HANDLER
        // ========================================

        // Main meal planning logic
        function handleMealPlanSubmission() {
            console.log('handleMealPlanSubmission called');

            // Get user preferences
            const selectedPeople = document.querySelector('.people-btn.selected');
            const selectedSpice = document.querySelector('.spice-btn.selected');
            const vegetarianOnly = document.getElementById('vegetarian');
            const lowCarbOnly = document.getElementById('lowCarb');

            console.log('Form elements found:', {
                selectedPeople: !!selectedPeople,
                selectedSpice: !!selectedSpice,
                vegetarianOnly: !!vegetarianOnly,
                lowCarbOnly: !!lowCarbOnly
            });

            if (!selectedPeople || !selectedSpice) {
                alert('Please select number of people and spice level!');
                return;
            }

            plannerPreferences = {
                people: parseInt(selectedPeople.dataset.count),
                maxSpice: selectedSpice.dataset.spice,
                vegetarian: vegetarianOnly ? vegetarianOnly.checked : false,
                lowCarb: lowCarbOnly ? lowCarbOnly.checked : false
            };

            console.log('Preferences set:', plannerPreferences);

            // Close modal and show suggestions
            closeMealPlanModal();

            // Small delay to ensure modal is closed before generating suggestions
            setTimeout(() => {
                generateMealSuggestions();
            }, 100);
            unlockBodyScroll();
        }

        // ========================================
        // MODAL AND UI CONTROL FUNCTIONS
        // ========================================

        // Modal control functions
        function openMealPlanModal() {
            const modal = document.getElementById('mealPlanModal');
            if (modal) {
                modal.classList.add('open');
            }
            lockBodyScroll();
        }

        function closeMealPlanModal() {
            const modal = document.getElementById('mealPlanModal');
            if (modal) {
                modal.classList.remove('open');
            }
            unlockBodyScroll();
        }

        function closeMealSuggestions() {
            const suggestionsContainer = document.getElementById('mealSuggestions');
            if (suggestionsContainer) {
                suggestionsContainer.style.display = 'none';
            }
            currentMealPlan = [];
            updatePlannerDisplay();
        }

        function changePlanQuantity(mealId, change) {
            const meal = currentMealPlan.find(m => m.id === mealId);
            if (!meal) return;

            meal.quantity += change;
            if (meal.quantity < 1) {
                removeFromPlan(mealId);
            } else {
                updatePlannerDisplay();
            }
        }

        // ========================================
        // MEAL PLAN MANAGEMENT FUNCTIONS
        // ========================================

        // Add meal to temporary plan
        function addToPlan(mealId) {
            const meal = products.find(p => p.id === mealId);
            if (!meal) return;

            const existing = currentMealPlan.find(m => m.id === mealId);
            if (existing) {
                existing.quantity += 1; // increment quantity
            } else {
                currentMealPlan.push({ ...meal, quantity: 1 }); // set initial quantity
            }

            updatePlannerDisplay();
        }


        // Remove meal from plan
        function removeFromPlan(mealId) {
            currentMealPlan = currentMealPlan.filter(meal => meal.id !== mealId);
            updatePlannerDisplay();
        }

        // Add all planned meals to cart
        function addAllToCart() {
            if (currentMealPlan.length === 0) {
                alert('Your meal plan is empty!');
                return;
            }

            let addedCount = 0;

            currentMealPlan.forEach(meal => {
                const existingInCart = cart.find(item => item.id === meal.id);
                if (existingInCart) {
                    existingInCart.quantity += meal.quantity;
                } else {
                    cart.push({
                        id: meal.id,
                        name: meal.name,
                        price: meal.price,
                        image: meal.image,
                        quantity: meal.quantity
                    });
                }
                addedCount++;
            });

            updateCart(); // Update UI
            currentMealPlan = [];
            updatePlannerDisplay();
            closeMealSuggestions(); // Hide planner sidebar

            alert(`${addedCount} meals added to cart successfully!`);
            unlockBodyScroll();
        }


        // ========================================
        // EVENT LISTENERS (initialized last)
        // ========================================

        // DOM Content Loaded - Event Listeners Setup
        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM Content Loaded - Setting up event listeners');

            // People selector
            document.querySelectorAll('.people-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    document.querySelectorAll('.people-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    console.log('Selected people count:', this.dataset.count);
                });
            });

            // Spice selector
            document.querySelectorAll('.spice-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    document.querySelectorAll('.spice-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    console.log('Selected spice level:', this.dataset.spice);
                });
            });

            // Form submission
            const mealPlanForm = document.getElementById('mealPlanForm');
            if (mealPlanForm) {
                mealPlanForm.addEventListener('submit', function (e) {
                    e.preventDefault();
                    console.log('Form submitted, calling handleMealPlanSubmission');
                    handleMealPlanSubmission();
                });
                console.log('Form submit listener attached successfully');
            } else {
                console.error('Meal plan form not found! Make sure element with ID "mealPlanForm" exists.');
            }

            // Debug: Check for required DOM elements
            const requiredElements = [
                'mealPlanModal',
                'mealSuggestions',
                'suggestedMeals'
            ];

            requiredElements.forEach(id => {
                const element = document.getElementById(id);
                if (!element) {
                    console.warn(`Warning: Required element #${id} not found in DOM`);
                }
            });

            console.log('Event listeners setup complete');
        });

        // Function to add product to cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: 1
                });
            }

            updateCart();
            openCart();
        }

        function generateOrderID() {
            const now = new Date();
            const datePart = now.toISOString().slice(0, 10).replace(/-/g, '');
            const timePart = now.toTimeString().slice(0, 8).replace(/:/g, '');
            return `ORD-${datePart}-${timePart}`;
        }

        // Function to update cart
        function updateCart() {
            // Update cart items display
            cartItemsContainer.innerHTML = '';
            console.log('Cart items at submission:', cart);
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p>Your cart is empty</p>';
            } else {
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.classList.add('cart-item');
                    cartItem.innerHTML = `
        <img src="${item.image}" alt="${item.name}" class="cart-item-img">
        <div class="cart-item-details">
            <h4 class="cart-item-title">${item.name}</h4>
            <p class="cart-item-price"> ${(item.price * item.quantity).toFixed(2)} Nis</p>
            <div class="cart-item-quantity">
                <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                <input type="number" value="${item.quantity}" min="1" class="quantity-input" data-id="${item.id}">
                <button class="quantity-btn increase" data-id="${item.id}">+</button>
                <button class="cart-item-remove" data-id="${item.id}">Remove</button>
            </div>
        </div>
    `;
                    cartItemsContainer.appendChild(cartItem);
                });
            }

            // Add event listeners to quantity buttons and inputs
            document.querySelectorAll('.quantity-btn.decrease').forEach(button => {
                button.addEventListener('click', function () {
                    const productId = parseInt(this.getAttribute('data-id'));
                    decreaseQuantity(productId);
                });
            });

            document.querySelectorAll('.quantity-btn.increase').forEach(button => {
                button.addEventListener('click', function () {
                    const productId = parseInt(this.getAttribute('data-id'));
                    increaseQuantity(productId);
                });
            });

            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('change', function () {
                    const productId = parseInt(this.getAttribute('data-id'));
                    updateQuantity(productId, parseInt(this.value));
                });
            });

            document.querySelectorAll('.cart-item-remove').forEach(button => {
                button.addEventListener('click', function () {
                    const productId = parseInt(this.getAttribute('data-id'));
                    removeFromCart(productId);
                });
            });

            // Calculate and update totals
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            cartSubtotal.textContent = `${subtotal.toFixed(2)} Nis`;

            // Check if eligible for free delivery
            let shipping = subtotal >= freeDeliveryThreshold ? 0 : deliveryFee;

            const total = subtotal;
            cartTotal.textContent = `${total.toFixed(2)} Nis`;

            // Update cart count
            const itemCount = cart.reduce((count, item) => count + item.quantity, 0);
            cartCount.textContent = itemCount;
        }

        // Function to decrease quantity
        function decreaseQuantity(productId) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                if (item.quantity > 1) {
                    item.quantity--;
                } else {
                    removeFromCart(productId);
                    return;
                }
                updateCart();
            }
        }

        // Function to increase quantity
        function increaseQuantity(productId) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity++;
                updateCart();
            }
        }

        // Function to update quantity
        function updateQuantity(productId, quantity) {
            if (quantity < 1) quantity = 1;
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = quantity;
                updateCart();
            }
        }

        // Function to remove item from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
        }

        // Function to open cart
        function openCart() {
            cartSidebar.classList.add('open');
            overlay.classList.add('open');
            lockBodyScroll();
        }

        // Function to close cart
        function closeCartFunc() {
            cartSidebar.classList.remove('open');
            if (!checkoutModal.classList.contains('open')) {
                overlay.classList.remove('open');
                unlockBodyScroll();
            }
        }

        // Function to open checkout modal
        function openCheckoutModal() {
            checkoutModal.classList.add('open');
            overlay.classList.add('open');
            // Ensure body scroll is locked
            lockBodyScroll();
        }

        // Function to close checkout modal
        function closeCheckoutModal() {
            checkoutModal.classList.remove('open');
            if (!cartSidebar.classList.contains('open')) {
                overlay.classList.remove('open');
                unlockBodyScroll();
            }
        }

        // Function to toggle address fields based on delivery option
        function toggleAddressFields() {
            const isDelivery = document.querySelector('input[name="delivery"][value="delivery"]').checked;
            deliveryAddressFields.forEach(field => {
                field.style.display = isDelivery ? 'block' : 'none';
            });
        }

        // Function to toggle contact fields (if you have this functionality)
        function toggleContactFields() {

        }

        // Function to start order tracking
        function startOrderTracking(orderId) {
            showStatusModal(orderId);
        }

        // Initialize the app
        function init() {
            // Display products
            displayProducts();

            // Event listeners
            if (cartIcon) cartIcon.addEventListener('click', openCart);
            if (closeCart) closeCart.addEventListener('click', closeCartFunc);
            if (overlay) {
                overlay.addEventListener('click', function () {
                    closeCartFunc();
                    closeCheckoutModal();
                });
            }
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', function () {
                    if (cart.length === 0) {
                        alert('Your cart is empty. Please add items before checkout.');
                    } else {
                        openCheckoutModal();
                    }
                });
            }
            if (closeModal) closeModal.addEventListener('click', closeCheckoutModal);

            // Toggle address fields based on delivery option
            deliveryOptions.forEach(option => {
                option.addEventListener('change', toggleAddressFields);
            });

            // Handle checkout form submission
            const checkoutForm = document.querySelector('.checkout-form');
            if (checkoutForm) {
                checkoutForm.addEventListener('submit', async function (e) {
                    e.preventDefault();
                    const submitBtn = e.target.querySelector('button[type="submit"]');
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Processing...';
                    orderId = generateOrderID();

                    try {
                        // 1. Validate inputs
                        const name = document.getElementById('name').value.trim();
                        const phone = document.getElementById('phone').value.trim();
                        if (!name || !phone) {
                            alert('Please fill in name and phone number');
                            return;
                        }

                        // 2. Verify cart has items
                        if (cart.length === 0) {
                            alert('Your cart is empty! Please add items before checkout.');
                            return;
                        }

                        // 3. Build order data for SheetDB
                        const orderData = {
                            order_id: orderId,
                            Customer: name,
                            Phone: phone,
                            Contact: document.getElementById('contact').value,
                            Delivery: document.querySelector('input[name="delivery"]:checked').value,
                            City: "", // Initialize as empty string
                            Address: "", // Initialize as empty string
                            Payment: document.getElementById('payment').value,
                            "ORDER ITEMS": cart.map(item => `${item.quantity}x ${item.name}`).join(', '),
                            Subtotal: cart.reduce((total, item) => total + (item.price * item.quantity), 0),
                            Notes: document.getElementById('notes').value.trim()
                        };

                        // Add delivery-specific fields if needed
                        if (orderData.Delivery === "delivery") {
                            orderData.City = document.getElementById('city').value;
                            orderData.Address = document.getElementById('address').value;
                        }

                        // 4. Send to SheetDB
                        const response = await fetch("https://sheetdb.io/api/v1/o3okeg0qb05on", {
                            method: "POST",
                            mode: "cors",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify({
                                data: [orderData]
                            })
                        });

                        // Add response validation:
                        if (response.ok) {
                            const responseData = await response.json();
                            console.log('SheetDB Response:', responseData);
                            if (responseData.created === 1) {
                                // Success handling
                                const confirmation = document.createElement('div');
                                confirmation.style = `
                            position: fixed;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: white;
                            padding: 2rem;
                            border-radius: 10px;
                            box-shadow: 0 0 20px rgba(0,0,0,0.2);
                            z-index: 10000;
                            text-align: center;
                        `;

                                confirmation.innerHTML = `
                            <h3>YOUR ORDER SUMMARY</h3>
                            <p>We've received your order for <strong>${orderData["ORDER ITEMS"]}</strong></p>
                            <p>Total: ${orderData.Subtotal} NIS</p>
                            <p>We'll contact you at ${orderData.Phone} to confirm delivery</p>
                            <button onclick="this.parentElement.remove()" 
                                style="margin-top: 1rem; padding: 0.5rem 1.5rem; background: #ff6b00; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                OK
                            </button>
                        `;

                                submitBtn.disabled = false;
                                cart = [];
                                updateCart();
                                closeCartFunc();
                                closeCheckoutModal();
                                startOrderTracking(orderId);
                                submitBtn.textContent = 'Complete Order';
                                document.body.appendChild(confirmation);

                            } else {
                                throw new Error('SheetDB created 0 records');
                            }
                        } else {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert(`Error: ${error.message}`);
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Complete Order';
                    }
                });
            }

            // Set initial state
            updateCart();
            toggleAddressFields();
        }

        // Initialize star rating functionality
        document.addEventListener('DOMContentLoaded', function () {
            const stars = document.querySelectorAll('.star');

            stars.forEach(star => {
                star.addEventListener('click', function () {
                    rating = parseInt(this.getAttribute('data-value'));

                    // Update star display
                    stars.forEach(s => {
                        if (parseInt(s.getAttribute('data-value')) <= rating) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                });

                // Hover effects
                star.addEventListener('mouseover', function () {
                    const value = parseInt(this.getAttribute('data-value'));

                    stars.forEach(s => {
                        if (parseInt(s.getAttribute('data-value')) <= value) {
                            s.style.color = '#ffb347';
                        }
                    });
                });

                star.addEventListener('mouseout', function () {
                    stars.forEach(s => {
                        if (parseInt(s.getAttribute('data-value')) <= rating) {
                            s.style.color = '#ff8c00';
                        } else {
                            s.style.color = '#ddd';
                        }
                    });
                });
            });

            // Submit review handler
            const submitReviewBtn = document.getElementById('submitReview');
            if (submitReviewBtn) {
                submitReviewBtn.addEventListener('click', function () {
                    const name = document.getElementById('reviewName').value;
                    const comment = document.getElementById('reviewComment').value;

                    // Validate inputs
                    if (!name || rating === 0) {
                        alert('Please enter your name and select a rating.');
                        return;
                    }

                    // Submit review to SheetDB
                    const reviewData = {
                        order_id: orderId,
                        customer_name: name,
                        rating: rating,
                        comment: comment,
                        review_date: new Date().toISOString()
                    };

                    fetch(SHEETDB_API_URL2, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            data: reviewData
                        })
                    })
                        .then(response => response.json())
                        .then(data => {
                            // Close modal or show thank you message
                            document.getElementById('statusMessage').textContent =
                                'Thank you for your feedback!';
                            document.getElementById('reviewForm').style.display = 'none';

                            // Close modal after delay
                            setTimeout(() => {
                                document.getElementById('statusModal').style.display = 'none';
                            }, 3000);
                        })
                        .catch(error => {
                            console.error('Error submitting review:', error);
                            alert('There was an error submitting your review. Please try again.');
                        });
                });
            }


            //         function checkBusinessHours() {
            //         const banner = document.getElementById('hours-banner');
            //         const now = new Date();
            //         const hour = now.getHours();

            // Business hours: 10 AM  to 5 PM 
            //         if (hour < 10 || hour >= 17) {
            //             banner.style.display = 'block';
            //         }
            //     }

            //     document.addEventListener('DOMContentLoaded', checkBusinessHours);
            //     if (hour < 10 || hour >= 17) {
            //     const buttons = document.querySelectorAll('.btn, .checkout-btn');
            //     buttons.forEach(btn => btn.disabled = true);
            // }



            // Initialize the app
            init();
        });
    </script>

</body>