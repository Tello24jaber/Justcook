<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Just Cook - Ready-to-Cook Food</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
    <style>
        :root {
            --primary: #ff6b00;
            --secondary: #000000;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: var(--dark);
        }

        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            font-weight: bold;
            font-size: 24px;
            color: var(--secondary);
        }

        .logo-icon {
            color: var(--primary);
            margin-right: 10px;
            font-size: 30px;
        }

        .logo span:last-child {
            color: var(--primary);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 30px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: var(--primary);
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("https://images.immediate.co.uk/production/volatile/sites/30/2025/01/COOK-945de71.jpeg") center/cover no-repeat;
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #e05d00;
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            margin-left: 15px;
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.2rem;
        }

        .section-title span {
            color: var(--primary);
        }

        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .product-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-10px);
        }

        .product-image {
            height: 200px;
            width: 100%;
            object-fit: cover;
        }

        .product-info {
            padding: 10px;
        }

        .product-title {
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .product-description {
            color: var(--gray);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .product-price {
            font-weight: bold;
            font-size: 1rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
        }

        .add-to-cart {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 500;
        }

        .add-to-cart:hover {
            background-color: #e05d00;
        }

        .how-it-works {
            background-color: var(--light);
        }

        .steps {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }

        .step {
            flex: 1;
            min-width: 250px;
            text-align: center;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .step-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }

        .step h3 {
            margin-bottom: 15px;
        }

        .delivery-options {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }

        .delivery-option {
            flex: 1;
            min-width: 300px;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .delivery-option h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .delivery-option h3 i {
            margin-right: 10px;
            color: var(--primary);
        }

        .checkout-form .form-group {
            margin-bottom: 20px;
        }

        .checkout-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .checkout-form input,
        .checkout-form select,
        .checkout-form textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
            font-size: 1rem;
        }

        .checkout-form .delivery-type {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .checkout-form .delivery-type label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .checkout-form .delivery-type input {
            width: auto;
            margin-right: 8px;
        }

        footer {
            background-color: var(--secondary);
            color: white;
            padding: 50px 0 20px;
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col {
            flex: 1;
            min-width: 250px;
        }

        .footer-col h3 {
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .action-btn,
        .footer-col p,
        .footer-col a {
            margin-bottom: 10px;
            display: block;
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-col a:hover {
            color: var(--primary);
        }

        .social a {
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.3s;
        }

        .social :hover {
            color: var(--primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #383838;
            color: #adb5bd;
            font-size: 0.9rem;
        }




        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background-color: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transition: right 0.3s;
            z-index: 1000;
            padding: 20px;
            padding-bottom: 80px;
            max-height: 100vh;
            overflow-y: auto;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 22px;
            cursor: pointer;
            color: var(--dark);
        }

        .cart-items {
            margin-bottom: 30px;
        }

        .cart-item {
            display: flex;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .cart-item-img {
            width: 80px;
            height: 80px;
            border-radius: 5px;
            object-fit: cover;
            margin-right: 15px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--primary);
            font-weight: 500;
            margin-bottom: 10px;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            background-color: var(--light-gray);
            border: none;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .quantity-input {
            width: 40px;
            height: 30px;
            text-align: center;
            margin: 0 8px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
        }

        .cart-item-remove {
            color: #dc3545;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            margin-left: 15px;
        }

        .cart-summary {
            border-top: 1px solid var(--light-gray);
            padding-top: 20px;
            position: sticky;
            bottom: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.1);
        }

        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .cart-summary-row.total {
            font-weight: bold;
            font-size: 18px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--light-gray);
        }

        .checkout-btn {
            width: 100%;
            padding: 15px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }



        .modal {
            max-height: 90vh;
            overflow-y: auto;
        }

        .checkout-btn:hover {
            background-color: #e05d00;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 999;
        }

        .overlay.open {
            visibility: visible;
            opacity: 1;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal.open {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 22px;
            cursor: pointer;
        }

        /* Modal styles */
        .status-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .status-modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            border: 2px solid #ff8c00;
        }

        .status-message {
            font-size: 24px;
            margin-bottom: 20px;
            color: #333;
            font-weight: 600;
        }

        .status-icon {
            font-size: 48px;
            margin-bottom: 20px;
            color: #ff8c00;
        }

        .progress-bar {
            height: 10px;
            background-color: #f1f1f1;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: #ff8c00;
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Review form styles */
        .review-form {
            display: none;
            margin-top: 20px;
            text-align: left;
        }

        .review-form h3 {
            color: #ff8c00;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .star-rating {
            margin: 10px 0;
        }

        .star {
            font-size: 30px;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.active {
            color: #ff8c00;
        }

        .submit-review {
            background-color: #ff8c00;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-review:hover {
            background-color: #e67e00;
        }

        .how-to-cook-btn {
             background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 500;
        }

        .how-to-cook-btn:hover {
            background-color: #e05d00;
        }


        /* Popup Styling */
        .cooking-popup {
            display: none;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 8px;
            border: 1px solid #ff8c00;
            box-shadow: 0 4px 12px rgba(255, 140, 0, 0.3);
            width: 280px;
            max-width: 90vw;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .cooking-popup.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .cooking-popup-content {
            padding: 12px;
            color: rgb(255, 255, 255);
        }

        .cooking-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ff8c00;
            padding-bottom: 8px;
            margin-bottom: 10px;
        }

        .cooking-popup-title {
            margin: 0;
            color: #ff8c00;
            font-size: 1.1rem;
        }

        .cooking-popup-close {
            background: none;
            border: none;
            color: #ff8c00;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .cooking-popup-body {
            font-size: 0.9rem;
        }

        .cooking-step {
            margin-bottom: 8px;
            display: flex;
        }

        .step-number {
            color: #ff8c00;
            font-weight: bold;
            margin-right: 8px;
            flex-shrink: 0;
            width: 20px;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .header-inner {
                flex-direction: column;
                text-align: center;
            }

            nav ul {
                margin-top: 20px;
            }

            nav ul li {
                margin: 0 10px;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .products {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .cart-sidebar {
                width: 90%;
                right: -100%;
            }
            .add-to-cart{
             padding: 5px 10px;


            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-inner">
                <div class="logo">
                    <span class="logo-icon">🍲</span>
                    <span>Just</span> <span>Cook</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#products">Products</a></li>
                        <li><a href="#how-it-works">How It Works</a></li>
                        <li><a href="#delivery">Delivery</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li>
                            <div class="cart-icon" id="cart-icon">
                                <span>🛒</span>
                                <span class="cart-count">0</span>
                            </div>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div id="hours-banner"
        style="display: none; background-color: #ff4444; color: white; padding: 15px; text-align: center; font-weight: bold;">
        We are currently closed. Orders are available from 11:00 AM to 5:00 PM.
    </div>


    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1><span style="color: var(--primary);">Just Cook</span></h1>
            <p>Premium ingredients, perfectly portioned, seasoned and ready for you to cook at home. Restaurant quality
                meals without the hassle.</p>
            <a href="#products" class="btn btn-primary">Shop Now</a>
            <a href="#how-it-works" class="btn btn-outline">How It Works</a>
        </div>
    </section>

    <!-- Products Section -->
    <section class="section" id="products">
        <div class="container">
            <h2 class="section-title">Our <span>Products</span></h2>
            <div class="products" id="product-container">
                <!-- Products will be loaded here by JavaScript -->
            </div>
        </div>
    </section>
    <div class="cooking-popup" id="cooking-popup">
        <div class="cooking-popup-content">
            <div class="cooking-popup-header">
                <h3 class="cooking-popup-title">How to Cook <span id="dish-name"></span></h3>
                <button class="cooking-popup-close">&times;</button>
            </div>
            <div class="cooking-popup-body" id="cooking-steps">
                <!-- Steps will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- How It Works Section -->
    <section class="section how-it-works" id="how-it-works">
        <div class="container">
            <h2 class="section-title">How It <span>Works</span></h2>
            <div class="steps">
                <div class="step">
                    <div class="step-icon">1</div>
                    <h3>Choose Your Meals</h3>
                    <p>Browse our menu and select the meals you want to cook at home.</p>
                </div>
                <div class="step">
                    <div class="step-icon">2</div>
                    <h3>We Prepare</h3>
                    <p>We prepare all ingredients, seasonings, and sauces, portioned perfectly for you.</p>
                </div>
                <div class="step">
                    <div class="step-icon">3</div>
                    <h3>Delivery or Pickup</h3>
                    <p>Get your meals delivered or pick them up from our store.</p>
                </div>
                <div class="step">
                    <div class="step-icon">4</div>
                    <h3>Just Cook & Enjoy</h3>
                    <p>Follow our simple instructions to cook and enjoy your delicious meal!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Delivery Section -->
    <section class="section" id="delivery">
        <div class="container">
            <h2 class="section-title">Delivery <span>Options</span></h2>
            <div class="delivery-options">
                <div class="delivery-option">
                    <h3><i>🚚</i> Home Delivery</h3>
                    <p>We deliver to your doorstep in Ramallah and it's villages. Delivery is available 7 days a
                        week from 10 AM to 5 PM.</p>
                    <p>Delivery fee is based on your location<br> </p>
                    <p>Average delivery time: 40-60 minutes</p>
                </div>
                <div class="delivery-option">
                    <h3><i>🏬</i> Store Pickup</h3>
                    <p>Order online and pick up at our store at your convenience. Your order will be ready in 30
                        minutes.</p>
                    <p>Store address:<br>Ramallah<br>Ein Musbah, Main street, next to Al-Kamal supermarket</p>
                    <p>pickup hours: 9 AM - 5 PM daily</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="section" id="about">
        <div class="container">
            <h2 class="section-title">About <span>Us</span></h2>
            <div style="display: flex; flex-wrap: wrap; gap: 40px; align-items: center;">
                <div style="flex: 1; min-width: 300px;">
                    <img src="images/sidepic.png" alt="Our Store" style="width: 100%; border-radius: 10px;">
                </div>
                <div style="flex: 1; min-width: 300px;">
                    <h3 style="margin-bottom: 20px; color: var(--primary); font-size: 1.8em;">Our Story</h3>
                    <p style="margin-bottom: 15px;font-size: 1.5em;">At Just Cook, we believe everyone should be able to
                        enjoy delicious,
                        home-cooked meals without the hassle of shopping, measuring, and prepping ingredients.</p>
                    <p style="margin-bottom: 15px;font-size: 1.5em;">We started in 2023 with a simple mission: to make
                        cooking at home
                        easier, faster, and more enjoyable. Our culinary team prepares everything you need – from
                        premium ingredients to perfect seasonings – so you can focus on the fun part: cooking and
                        enjoying your meal.</p>
                    <p style="font-size: 1.5em">All our ingredients are locally sourced whenever possible, and we're
                        committed to sustainability
                        in all aspects of our business.</p>
                </div>
            </div>
        </div>
    </section>

    <div id="statusModal" class="status-modal">
        <div class="status-modal-content">
            <div class="status-icon">📦</div>
            <div id="statusMessage" class="status-message">Your order is being prepared...</div>
            <div class="progress-bar">
                <div id="progressBarFill" class="progress-bar-fill"></div>
            </div>

            <!-- Review Form (initially hidden) -->
            <div id="reviewForm" class="review-form">
                <h3>Please Rate Your Experience</h3>
                <div class="form-group">
                    <label for="reviewName">Name:</label>
                    <input type="text" id="reviewName" placeholder="Your name">
                </div>
                <div class="form-group">
                    <label>Rating:</label>
                    <div class="star-rating" id="starRating">
                        <span class="star" data-value="1">★</span>
                        <span class="star" data-value="2">★</span>
                        <span class="star" data-value="3">★</span>
                        <span class="star" data-value="4">★</span>
                        <span class="star" data-value="5">★</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="reviewComment">Comments:</label>
                    <textarea id="reviewComment" rows="4" placeholder="Tell us about your experience"></textarea>
                </div>
                <button class="submit-review" id="submitReview">Submit Review</button>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h3>Contact Us</h3>
                    <p>📞 00972569899999</p>
                    <p>📞 00972594777733</p>
                    <p>🏬 Ramallah, Ein Musbah, Main street, next to Al-Kamal supermarket / close to Ajeenati bakery</p>
                </div>
                <div class="footer-col">
                    <h3>Opening Hours</h3>
                    <p>Pickup: Daily 9 AM - 5 PM</p>

                    <p>Delivery: Daily 10 AM - 5 PM</p>
                </div>
                <div class="footer-col">

                    <h3>Our Social Media</h3>
                    <div class="social">
                        <a href="https://www.facebook.com/profile.php?id=61550867874458&rdid=9cGyc6it8lzNTVFc&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F16CzWi5nt9#"
                            target="_blank">
                            <p>Facebook</p>
                        </a>
                        <a href="https://www.instagram.com/justcook.pal/" target="_blank">
                            <p>Instagram</p>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-col">
                <h3>Quick Links</h3>
                <a href="#products">Products</a>
                <a href="#how-it-works">How It Works</a>
                <a href="#delivery">Delivery Options</a>
                <a href="#about">About Us</a>


            </div>

        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Jaber.co All rights reserved.</p>
        </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button class="close-cart" id="close-cart">×</button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Cart items will be added here dynamically -->
        </div>
        <div class="cart-summary">
            <div class="cart-summary-row">
                <span>Subtotal:</span>
                <span id="cart-subtotal">0.00 Nis</span>
            </div>

            <div class="cart-summary-row total">
                <span>Total:</span>
                <span id="cart-total">00 Nis</span>
            </div>
            <button class="checkout-btn" id="checkout-btn">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Checkout Modal -->
    <div class="modal" id="checkout-modal">
        <div class="modal-header">
            <h3>Checkout</h3>
            <button class="close-modal" id="close-modal">×</button>
        </div>
        <form class="checkout-form" action="https://formsubmit.co/talal123542006@gmail.com" method="POST">
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="Full Name" required>
            </div>

            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="Phone Number" required>
            </div>
            <div class="form-group">
                <label>Delivery Option</label>
                <div class="delivery-type">
                    <label>
                        <input type="radio" name="delivery" value="delivery" checked> Delivery
                    </label>
                    <label>
                        <input type="radio" name="delivery" value="pickup"> Store Pickup
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="contact">Preferred Contact Method</label>
                <select id="contact" onchange="toggleContactFields()">

                    <option value="phone">phone</option>
                    <option value="whatsapp">WhatsApp</option>
                </select>
            </div>

            <div class="form-group delivery-address">
                <label for="city">City</label>
                <select id="city">
                    <option value="ramallah">رام الله</option>

                    <option value="villages">قرى رام الله</option>
                </select>
            </div>
            <div class="form-group delivery-address">
                <label for="address">Delivery Address</label>
                <input type="text" id="address" name="Delivery Address" placeholder="Specify your address please">
            </div>


            <div class="form-group">
                <label for="payment">Payment Method</label>
                <select id="payment">
                    <option value="card">Credit/Debit Card (via machine)</option>

                    <option value="cash">Cash</option>
                </select>
            </div>
            <div class="form-group">
                <label for="notes">Special Instructions</label>
                <textarea id="notes" name="Special Instructions" rows="3"></textarea>
            </div>
            <input type="hidden" name="_subject" value="New Order from Just Cook">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_template" value="table">



            <button type="submit" class="checkout-btn">Complete Order</button>
        </form>
    </div>
    <script>
        // Product data
const products = [{
    id: 1,
    name: "ورق عنب ",
    description: "stuffed vine leaves with rice and meat",
    price: 30,
    image: "images/vine.jpg"
},
{
    id: 2,
    name: "خضروات مقطعة",
    description: "Chopped vegetables for (Maqlouba)",
    price: 25,
    image: "images/vegetables.jpg"
},
{
    id: 3,
    name: "ملفوف ",
    description: "cabbage stuffed with rice and meat for (Malfouf)",
    price: 30,
    image: "images/malfouf.jpg"
},
{
    id: 4,
    name: "كوسا مخشي",
    description: "Zucchini stuffed with meat and onions",
    price: 30,
    image: "images/mukhshi.jpg"
},
{
    id: 5,
    name: "سمك سالمون",
    description: "Salmon with herbs and vegetables",
    price: 55,
    image: "images/salmon.jpg"
},
{
    id: 6,
    name: "كوسا محفور",
    description: "cored zucchini",
    price: 20,
    image: "images/zucchini.jpg"
},
{
    id: 7,
    name: "كبة",
    description: "stuffed with ground meat and onions",
    price: 30,
    image: "images/kubbeh.jpg"
},
{
    id: 8,
    name: "دجاجة محشوة مع ورق عنب",
    description: "A whole chicken stuffed with vine leaves",
    price: 75,
    image: "images/chicken.jpg"
}
];

// Cart functionality
let cart = [];
let deliveryFee = 15; // Default delivery fee
const freeDeliveryThreshold = 150;

// DOM Elements
const productContainer = document.getElementById('product-container');
const cartIcon = document.getElementById('cart-icon');
const cartSidebar = document.getElementById('cart-sidebar');
const closeCart = document.getElementById('close-cart');
const overlay = document.getElementById('overlay');
const cartItemsContainer = document.getElementById('cart-items');
const cartSubtotal = document.getElementById('cart-subtotal');
const cartDelivery = document.getElementById('cart-delivery');
const cartTotal = document.getElementById('cart-total');
const cartCount = document.querySelector('.cart-count');
const checkoutBtn = document.getElementById('checkout-btn');
const closeModal = document.getElementById('close-modal');
const checkoutModal = document.getElementById('checkout-modal');
const deliveryOptions = document.querySelectorAll('input[name="delivery"]');
const deliveryAddressFields = document.querySelectorAll('.delivery-address');
const body = document.body;

const SHEETDB_API_URL = "https://sheetdb.io/api/v1/q60skgagstajf";
SHEETDB_API_URL2 = "https://sheetdb.io/api/v1/ughkg71ixwwo3";
const CHECK_INTERVAL = 10000; // 10 seconds

// Order tracking variables
let orderId = null;
let orderStatus = 0; // 0: preparing, 1: on the way, 2: arrived
let statusCheckInterval = null;
let rating = 0;

orderId = generateOrderID();

// Cooking instructions for your dishes
const cookingInstructions = {
    '1': { // ورق عنب
        name: 'Stuffed Vine Leaves',
        steps: [
            'Rinse the vine leaves gently and remove any tough stems.',
            'In a bowl, mix the rice and meat filling with spices.',
            'Place a small amount of filling on each vine leaf.',
            'Roll tightly, folding in the sides as you roll.',
            'Arrange in a pot with water and cook for 45-60 minutes.',
            'Serve hot with yogurt or lemon sauce.'
        ]
    },
    '2': { // خضروات مقطعة
        name: 'Chopped Vegetables for Maqlouba',
        steps: [
            'Wash all vegetables thoroughly under cold water.',
            'Cut eggplant, cauliflower, and potatoes into large pieces.',
            'Soak eggplant in salted water for 15 minutes.',
            'Fry vegetables lightly in oil until golden.',
            'Layer with rice and meat in a pot.',
            'Cook with broth for 30-40 minutes, then flip to serve.'
        ]
    },
    '3': { // ملفوف
        name: 'Stuffed Cabbage (Malfouf)',
        steps: [
            'Blanch cabbage leaves in boiling water for 3-4 minutes.',
            'Remove leaves carefully and let them cool.',
            'Mix rice, meat, and spices for the filling.',
            'Place filling on each cabbage leaf and roll tightly.',
            'Arrange in a pot with tomato sauce and water.',
            'Simmer for 1 hour until tender. Serve hot.'
        ]
    },
    '4': { // كوسا مخشي
        name: 'Stuffed Zucchini',
        steps: [
            'Core the zucchini carefully, leaving the walls intact.',
            'Prepare filling with meat, onions, and rice.',
            'Stuff each zucchini with the filling mixture.',
            'Arrange in a pot with tomato sauce and water.',
            'Cook on medium heat for 45 minutes.',
            'Serve with yogurt and fresh herbs.'
        ]
    },
    '5': { // سمك سالمون
        name: 'Salmon with Herbs',
        steps: [
            'Pat salmon fillets dry and season with salt and pepper.',
            'Heat olive oil in a pan over medium-high heat.',
            'Cook salmon skin-side down for 4-5 minutes.',
            'Flip and cook for another 3-4 minutes.',
            'Add herbs and vegetables to the pan.',
            'Serve immediately with lemon wedges.'
        ]
    },
    '6': { // كوسا محفور
        name: 'Cored Zucchini',
        steps: [
            'Wash zucchini and trim the ends.',
            'Use a corer to hollow out the zucchini carefully.',
            'Keep the walls about 1/4 inch thick.',
            'Rinse out any remaining pulp.',
            'Now ready to be stuffed with your favorite filling.',
            'Can be frozen for later use if needed.'
        ]
    },
    '7': { // كبة
        name: 'Kubbeh (Stuffed Bulgur)',
        steps: [
            'Soak fine bulgur in water for 30 minutes.',
            'Drain and mix with ground meat and spices.',
            'Form the outer shell in your palm.',
            'Add the meat and onion filling inside.',
            'Seal and shape into football shapes.',
            'Deep fry until golden brown or boil in broth.'
        ]
    },
    '8': { // دجاجة محشوة
        name: 'Stuffed Chicken with Vine Leaves',
        steps: [
            'Clean the whole chicken inside and out.',
            'Prepare rice and vine leaf stuffing with spices.',
            'Stuff the chicken cavity with the mixture.',
            'Secure the opening with toothpicks or string.',
            'Roast in oven at 375°F for 1.5-2 hours.',
            'Let rest for 10 minutes before carving and serving.'
        ]
    }
};

// Function to show the status modal
function showStatusModal(id) {
    orderId = id;
    document.getElementById('statusModal').style.display = 'flex';
    document.getElementById('progressBarFill').style.width = '10%';

    // Start checking for status updates
    checkOrderStatus();
    statusCheckInterval = setInterval(checkOrderStatus, CHECK_INTERVAL);
}

// Function to check order status from SheetDB
function checkOrderStatus() {
    // Fetch the order status from SheetDB (filter by order ID)
    fetch(`${SHEETDB_API_URL}/search?order_id=${orderId}`)
        .then(response => response.json())
        .then(data => {
            if (data && data.length > 0) {
                updateOrderStatus(data[0]);
            } else {
                console.warn("⚠️ Order not found. Check order_id:", orderId);
            }

        })
        .catch(error => {
            console.error('Error fetching order status:', error);
        });
}

// Function to update the order status display
function updateOrderStatus(orderData) {
    const statusMessage = document.getElementById('statusMessage');
    const progressBarFill = document.getElementById('progressBarFill');
    const statusIcon = document.querySelector('.status-icon');

    const isOnTheWay = orderData.is_on_the_way === true ||
        orderData.is_on_the_way === 'TRUE' ||
        orderData.is_on_the_way === 'true';

    const hasArrived = orderData.has_arrived === true ||
        orderData.has_arrived === 'TRUE' ||
        orderData.has_arrived === 'true';

    console.log('🚚 isOnTheWay:', isOnTheWay, '| hasArrived:', hasArrived);
    console.log('🔄 Current orderStatus:', orderStatus);

    if (hasArrived && orderStatus < 2) {
        orderStatus = 2;
        statusMessage.textContent = '✅ Your order has arrived!';
        progressBarFill.style.width = '100%';
        statusIcon.textContent = '🎉';
        clearInterval(statusCheckInterval);
        setTimeout(showReviewForm, 2000);
    } else if (isOnTheWay && orderStatus < 1) {
        orderStatus = 1;
        statusMessage.textContent = '🛵 Your order is on the way!';
        progressBarFill.style.width = '60%';
        statusIcon.textContent = '🚚';
    } else {
        // Still preparing
        statusMessage.textContent = '🍳 Preparing your order...';
        progressBarFill.style.width = '30%';
        statusIcon.textContent = '🕒';
    }
}

// Function to show the review form
function showReviewForm() {
    document.getElementById('reviewForm').style.display = 'block';
}

// Function to lock body scroll
function lockBodyScroll() {
    const scrollY = window.scrollY;
    body.style.position = 'fixed';
    body.style.top = `-${scrollY}px`;
    body.style.width = '100%';
    body.dataset.scrollY = scrollY;
}

// Function to unlock body scroll
function unlockBodyScroll() {
    if (body.style.position === 'fixed') {
        const scrollY = parseInt(body.dataset.scrollY || '0');
        body.style.position = '';
        body.style.top = '';
        body.style.width = '';
        window.scrollTo(0, scrollY);
    }
}

// Function to setup cooking buttons
function setupCookingButtons() {
    const buttons = document.querySelectorAll('.how-to-cook-btn');
    const popup = document.getElementById('cooking-popup');
    
    console.log('Setting up cooking buttons, found:', buttons.length); // Debug
    
    if (!popup) {
        console.error('Cooking popup element not found! Make sure the HTML is added.');
        return;
    }
    
    const dishNameElement = document.getElementById('dish-name');
    const cookingSteps = document.getElementById('cooking-steps');
    const closeButton = document.querySelector('.cooking-popup-close');

    // Add click event to each How to Cook button
    buttons.forEach(button => {
        button.addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('How to Cook button clicked!'); // Debug log

            // Get dish ID from data attribute
            const dishId = this.getAttribute('data-dish');
            console.log('Dish ID:', dishId); // Debug log
            
            const dish = cookingInstructions[dishId];
            console.log('Found dish:', dish); // Debug log

            if (!dish) {
                console.log('No cooking instructions found for dish ID:', dishId);
                alert('Cooking instructions not available for this dish.');
                return;
            }

            // Update popup content
            dishNameElement.textContent = dish.name;

            // Clear previous steps
            cookingSteps.innerHTML = '';

            // Add cooking steps
            dish.steps.forEach((step, index) => {
                const stepElement = document.createElement('div');
                stepElement.className = 'cooking-step';

                const numberElement = document.createElement('div');
                numberElement.className = 'step-number';
                numberElement.textContent = (index + 1) + '.';

                const textElement = document.createElement('div');
                textElement.className = 'step-text';
                textElement.textContent = step;

                stepElement.appendChild(numberElement);
                stepElement.appendChild(textElement);
                cookingSteps.appendChild(stepElement);
            });

            // Position popup near the button
            const buttonRect = this.getBoundingClientRect();
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            popup.style.left = (buttonRect.left + window.pageXOffset) + 'px';
            popup.style.top = (buttonRect.bottom + scrollTop + 10) + 'px';

            // Show popup with animation
            popup.classList.add('active');
            console.log('Popup should be visible now'); // Debug
        });
    });

    // Close popup when clicking the close button
    if (closeButton) {
        closeButton.addEventListener('click', function () {
            popup.classList.remove('active');
        });
    }

    // Close popup when clicking outside
    document.addEventListener('click', function (e) {
        if (popup && popup.classList.contains('active') &&
            !popup.contains(e.target) &&
            !e.target.classList.contains('how-to-cook-btn')) {
            popup.classList.remove('active');
        }
    });
}

// Function to display products
function displayProducts() {
    productContainer.innerHTML = '';
    products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.classList.add('product-card');
        productCard.innerHTML = `
            <img src="${product.image}" alt="${product.name}" class="product-image">
            <div class="product-info">
                <h3 class="product-title">${product.name}</h3>
                <p class="product-description">${product.description}</p>
                <p class="product-price">${product.price.toFixed(2)} Nis</p>
                <div class="product-actions">
                    <button class="add-to-cart" data-id="${product.id}">Add to Cart</button>
                    <button class="how-to-cook-btn" data-dish="${product.id}">How to Cook</button>
                </div>
            </div>
        `;
        productContainer.appendChild(productCard);
    });

    // Add event listeners to "Add to Cart" buttons
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', function () {
            const productId = parseInt(this.getAttribute('data-id'));
            addToCart(productId);
        });
    });

    // Setup cooking buttons after products are displayed
    setupCookingButtons();
}

// Function to add product to cart
function addToCart(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;

    const existingItem = cart.find(item => item.id === productId);
    if (existingItem) {
        existingItem.quantity++;
    } else {
        cart.push({
            id: product.id,
            name: product.name,
            price: product.price,
            image: product.image,
            quantity: 1
        });
    }

    updateCart();
    openCart();
}

function generateOrderID() {
    const now = new Date();
    const datePart = now.toISOString().slice(0, 10).replace(/-/g, '');
    const timePart = now.toTimeString().slice(0, 8).replace(/:/g, '');
    return `ORD-${datePart}-${timePart}`;
}

// Function to update cart
function updateCart() {
    // Update cart items display
    cartItemsContainer.innerHTML = '';
    console.log('Cart items at submission:', cart);
    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p>Your cart is empty</p>';
    } else {
        cart.forEach(item => {
            const cartItem = document.createElement('div');
            cartItem.classList.add('cart-item');
            cartItem.innerHTML = `
        <img src="${item.image}" alt="${item.name}" class="cart-item-img">
        <div class="cart-item-details">
            <h4 class="cart-item-title">${item.name}</h4>
            <p class="cart-item-price"> ${(item.price * item.quantity).toFixed(2)} Nis</p>
            <div class="cart-item-quantity">
                <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                <input type="number" value="${item.quantity}" min="1" class="quantity-input" data-id="${item.id}">
                <button class="quantity-btn increase" data-id="${item.id}">+</button>
                <button class="cart-item-remove" data-id="${item.id}">Remove</button>
            </div>
        </div>
    `;
            cartItemsContainer.appendChild(cartItem);
        });
    }

    // Add event listeners to quantity buttons and inputs
    document.querySelectorAll('.quantity-btn.decrease').forEach(button => {
        button.addEventListener('click', function () {
            const productId = parseInt(this.getAttribute('data-id'));
            decreaseQuantity(productId);
        });
    });

    document.querySelectorAll('.quantity-btn.increase').forEach(button => {
        button.addEventListener('click', function () {
            const productId = parseInt(this.getAttribute('data-id'));
            increaseQuantity(productId);
        });
    });

    document.querySelectorAll('.quantity-input').forEach(input => {
        input.addEventListener('change', function () {
            const productId = parseInt(this.getAttribute('data-id'));
            updateQuantity(productId, parseInt(this.value));
        });
    });

    document.querySelectorAll('.cart-item-remove').forEach(button => {
        button.addEventListener('click', function () {
            const productId = parseInt(this.getAttribute('data-id'));
            removeFromCart(productId);
        });
    });

    // Calculate and update totals
    const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
    cartSubtotal.textContent = `${subtotal.toFixed(2)} Nis`;

    // Check if eligible for free delivery
    let shipping = subtotal >= freeDeliveryThreshold ? 0 : deliveryFee;

    const total = subtotal;
    cartTotal.textContent = `${total.toFixed(2)} Nis`;

    // Update cart count
    const itemCount = cart.reduce((count, item) => count + item.quantity, 0);
    cartCount.textContent = itemCount;
}

// Function to decrease quantity
function decreaseQuantity(productId) {
    const item = cart.find(item => item.id === productId);
    if (item) {
        if (item.quantity > 1) {
            item.quantity--;
        } else {
            removeFromCart(productId);
            return;
        }
        updateCart();
    }
}

// Function to increase quantity
function increaseQuantity(productId) {
    const item = cart.find(item => item.id === productId);
    if (item) {
        item.quantity++;
        updateCart();
    }
}

// Function to update quantity
function updateQuantity(productId, quantity) {
    if (quantity < 1) quantity = 1;
    const item = cart.find(item => item.id === productId);
    if (item) {
        item.quantity = quantity;
        updateCart();
    }
}

// Function to remove item from cart
function removeFromCart(productId) {
    cart = cart.filter(item => item.id !== productId);
    updateCart();
}

// Function to open cart
function openCart() {
    cartSidebar.classList.add('open');
    overlay.classList.add('open');
    lockBodyScroll();
}

// Function to close cart
function closeCartFunc() {
    cartSidebar.classList.remove('open');
    if (!checkoutModal.classList.contains('open')) {
        overlay.classList.remove('open');
        unlockBodyScroll();
    }
}

// Function to open checkout modal
function openCheckoutModal() {
    checkoutModal.classList.add('open');
    overlay.classList.add('open');
    // Ensure body scroll is locked
    lockBodyScroll();
}

// Function to close checkout modal
function closeCheckoutModal() {
    checkoutModal.classList.remove('open');
    if (!cartSidebar.classList.contains('open')) {
        overlay.classList.remove('open');
        unlockBodyScroll();
    }
}

// Function to toggle address fields based on delivery option
function toggleAddressFields() {
    const isDelivery = document.querySelector('input[name="delivery"][value="delivery"]').checked;
    deliveryAddressFields.forEach(field => {
        field.style.display = isDelivery ? 'block' : 'none';
    });
}

// Function to toggle contact fields (if you have this functionality)
function toggleContactFields() {
    // Add your contact fields toggle logic here if needed
}

// Function to start order tracking
function startOrderTracking(orderId) {
    showStatusModal(orderId);
}

// Initialize the app
function init() {
    // Display products
    displayProducts();

    // Event listeners
    if (cartIcon) cartIcon.addEventListener('click', openCart);
    if (closeCart) closeCart.addEventListener('click', closeCartFunc);
    if (overlay) {
        overlay.addEventListener('click', function () {
            closeCartFunc();
            closeCheckoutModal();
        });
    }
    if (checkoutBtn) {
        checkoutBtn.addEventListener('click', function () {
            if (cart.length === 0) {
                alert('Your cart is empty. Please add items before checkout.');
            } else {
                openCheckoutModal();
            }
        });
    }
    if (closeModal) closeModal.addEventListener('click', closeCheckoutModal);

    // Toggle address fields based on delivery option
    deliveryOptions.forEach(option => {
        option.addEventListener('change', toggleAddressFields);
    });

    // Handle checkout form submission
    const checkoutForm = document.querySelector('.checkout-form');
    if (checkoutForm) {
        checkoutForm.addEventListener('submit', async function (e) {
            e.preventDefault();
            const submitBtn = e.target.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Processing...';
            const orderId = generateOrderID();

            try {
                // 1. Validate inputs
                const name = document.getElementById('name').value.trim();
                const phone = document.getElementById('phone').value.trim();
                if (!name || !phone) {
                    alert('Please fill in name and phone number');
                    return;
                }

                // 2. Verify cart has items
                if (cart.length === 0) {
                    alert('Your cart is empty! Please add items before checkout.');
                    return;
                }

                // 3. Build order data for SheetDB
                const orderData = {
                    order_id: orderId,
                    Customer: name,
                    Phone: phone,
                    Contact: document.getElementById('contact').value,
                    Delivery: document.querySelector('input[name="delivery"]:checked').value,
                    City: "", // Initialize as empty string
                    Address: "", // Initialize as empty string
                    Payment: document.getElementById('payment').value,
                    "ORDER ITEMS": cart.map(item => `${item.quantity}x ${item.name}`).join(', '),
                    Subtotal: cart.reduce((total, item) => total + (item.price * item.quantity), 0),
                    Notes: document.getElementById('notes').value.trim()
                };

                // Add delivery-specific fields if needed
                if (orderData.Delivery === "delivery") {
                    orderData.City = document.getElementById('city').value;
                    orderData.Address = document.getElementById('address').value;
                }

                // 4. Send to SheetDB
                const response = await fetch("https://sheetdb.io/api/v1/q60skgagstajf", {
                    method: "POST",
                    mode: "cors",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        data: [orderData]
                    })
                });

                // Add response validation:
                if (response.ok) {
                    const responseData = await response.json();
                    console.log('SheetDB Response:', responseData);
                    if (responseData.created === 1) {
                        // Success handling
                        const confirmation = document.createElement('div');
                        confirmation.style = `
                            position: fixed;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: white;
                            padding: 2rem;
                            border-radius: 10px;
                            box-shadow: 0 0 20px rgba(0,0,0,0.2);
                            z-index: 10000;
                            text-align: center;
                        `;

                        confirmation.innerHTML = `
                            <h3>🎉 Order Placed Successfully!</h3>
                            <p>We've received your order for <strong>${orderData["ORDER ITEMS"]}</strong></p>
                            <p>Total: ${orderData.Subtotal} NIS</p>
                            <p>We'll contact you at ${orderData.Phone} to confirm delivery</p>
                            <button onclick="this.parentElement.remove()" 
                                style="margin-top: 1rem; padding: 0.5rem 1.5rem; background: #ff6b00; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                OK
                            </button>
                        `;
                        
                        submitBtn.disabled = false;
                        cart = [];
                        updateCart();
                        closeCartFunc();
                        closeCheckoutModal();
                        startOrderTracking(orderId);
                        submitBtn.textContent = 'Complete Order';
                        document.body.appendChild(confirmation);

                    } else {
                        throw new Error('SheetDB created 0 records');
                    }
                } else {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
            } catch (error) {
                console.error('Error:', error);
                alert(`Error: ${error.message}`);
                submitBtn.disabled = false;
                submitBtn.textContent = 'Complete Order';
            }
        });
    }

    // Set initial state
    updateCart();
    toggleAddressFields();
}

// Initialize star rating functionality
document.addEventListener('DOMContentLoaded', function () {
    const stars = document.querySelectorAll('.star');

    stars.forEach(star => {
        star.addEventListener('click', function () {
            rating = parseInt(this.getAttribute('data-value'));

            // Update star display
            stars.forEach(s => {
                if (parseInt(s.getAttribute('data-value')) <= rating) {
                    s.classList.add('active');
                } else {
                    s.classList.remove('active');
                }
            });
        });

        // Hover effects
        star.addEventListener('mouseover', function () {
            const value = parseInt(this.getAttribute('data-value'));

            stars.forEach(s => {
                if (parseInt(s.getAttribute('data-value')) <= value) {
                    s.style.color = '#ffb347';
                }
            });
        });

        star.addEventListener('mouseout', function () {
            stars.forEach(s => {
                if (parseInt(s.getAttribute('data-value')) <= rating) {
                    s.style.color = '#ff8c00';
                } else {
                    s.style.color = '#ddd';
                }
            });
        });
    });

    // Submit review handler
    const submitReviewBtn = document.getElementById('submitReview');
    if (submitReviewBtn) {
        submitReviewBtn.addEventListener('click', function () {
            const name = document.getElementById('reviewName').value;
            const comment = document.getElementById('reviewComment').value;

            // Validate inputs
            if (!name || rating === 0) {
                alert('Please enter your name and select a rating.');
                return;
            }

            // Submit review to SheetDB
            const reviewData = {
                order_id: orderId,
                customer_name: name,
                rating: rating,
                comment: comment,
                review_date: new Date().toISOString()
            };

            fetch(SHEETDB_API_URL2, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    data: reviewData
                })
            })
                .then(response => response.json())
                .then(data => {
                    // Close modal or show thank you message
                    document.getElementById('statusMessage').textContent =
                        'Thank you for your feedback!';
                    document.getElementById('reviewForm').style.display = 'none';

                    // Close modal after delay
                    setTimeout(() => {
                        document.getElementById('statusModal').style.display = 'none';
                    }, 3000);
                })
                .catch(error => {
                    console.error('Error submitting review:', error);
                    alert('There was an error submitting your review. Please try again.');
                });
        });
    }

    // Initialize the app
    init();
});
    </script>

</body>